(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[7],{347:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var c,i=n(7),r=n(0),a=n(6),o=n(72),s=n(26);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var n,c,i=function(t,e){if(null==t)return{};var n,c,i={},r=Object.keys(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t,e){var n=t.title,i=t.titleId,a=u(t,["title","titleId"]);return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:e,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,c||(c=r.createElement("path",{d:"M0 10h24v4H0z"})))}var h,b=r.forwardRef(d),j=(n.p,n(78)),p=n(19),f=n(1),m={};function O(t){var e=t.name,n=t.value,c=t.maxQuantity,i=t.incremented,r=t.decremented,a=t.changed,l=t.blured,u=t.focused;return Object(f.jsxs)(m.Wrapper,{children:[Object(f.jsx)("button",{type:"button",className:"button minus",disabled:n<=1,onClick:r,"data-testid":"ChooseQuantity-minus-btn","aria-label":"Decrease product quantity",children:Object(f.jsx)(s.a,{size:"small",color:n<=1?p.a.colors.light2:"","data-testid":"ChooseQuantity-minus-icon",children:Object(f.jsx)(b,{})})}),Object(f.jsx)(o.a,{name:e,size:"small",value:n,changed:a,blured:l,focused:u}),Object(f.jsx)("button",{type:"button",className:"button plus",disabled:n>=c,onClick:i,"data-testid":"ChooseQuantity-plus-btn","aria-label":"Increase product quantity",children:Object(f.jsx)(s.a,{size:"small",color:n>=c?p.a.colors.light2:"","data-testid":"ChooseQuantity-plus-icon",children:Object(f.jsx)(j.a,{})})})]})}m.Wrapper=a.c.div(h||(h=Object(i.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"])),(function(t){return t.theme.colors.light4}),(function(t){return t.theme.spacings.level2})),O.defaultProps={focused:function(){}}},355:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return T}));var c,i,r=n(0),a=n(27),o=n(18),s=n(9),l=n(11),u=n(7),d=n(6),h=d.c.div(c||(c=Object(u.a)(["\n  & .photo-section {\n    align-items: center;\n    display: flex;\n    height: 45rem;\n    justify-content: center;\n    margin-right: ",";\n    padding: "," ",";\n    width: 100%;\n  }\n\n  & .photo {\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  & .data-section {\n    align-self: stretch;\n    display: flex;\n    flex-direction: column;\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .photo-section {\n      margin-right: ",";\n    }\n  }\n"])),(function(t){return t.theme.spacings.level5}),(function(t){return t.theme.spacings.level1}),(function(t){return t.theme.spacings.level2}),(function(t){return t.theme.spacings.level3})),b=n(55),j=n(76),p=n(13),f=n(25),m=n(31),O=n(16),g=d.c.div(i||(i=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n\n  & > button:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(t){return t.theme.spacings.level2})),x=n(17),v=n(347),y=n(22),P=n(62),k=n(19),E=n(2),C=(n(61),n(1));function S(t){var e=t.productId,n=t.productQuantity,c=t.productSellerUsername,i=t.onSetModal,u=t.userProfile,d=Object(a.k)(),h=Object(r.useState)(1),b=Object(O.a)(h,2),j=b[0],m=b[1],S=Object(s.c)((function(t){return t.auth.cart})),w=Object(s.c)((function(t){return t.ui.isCartLoading})),D=Object(s.b)(),I=Object(r.useCallback)((function(t){return D(l.b(t))}),[D]),N=Object(r.useCallback)((function(t,e){return D(l.s(t,e))}),[D]),T=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a,{size:"2",children:"Quantity: ".concat(n)}),Object(C.jsx)(f.a,{variant:"h4",mgTop:"3",children:"You are the seller of this product"})]});if((null===u||void 0===u?void 0:u.username)!==c){var q,z=null;S&&(z=S.find((function(t){return t.product._id===e})));var L=Object(C.jsx)(x.a,{filled:!0,stretch:!0,clicked:function(){u?(null===u||void 0===u?void 0:u.status)!==E.z.ACTIVE?i(E.m.PENDING_USER_INFO):I({quantity:j,product:e}):i(E.m.LOGIN)},isLoading:w,children:"add to cart"});(null===(q=z)||void 0===q?void 0:q.quantity)>=n&&(L=Object(C.jsxs)(f.a,{variant:"h4",align:"center",mgBottom:"2","data-testid":"PurchaseSection-not-able-to-add",children:["You have added all pieces to\xa0",Object(C.jsx)(o.Link,{to:"/cart",children:Object(C.jsx)(P.a,{children:"cart"})})]})),T=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(y.a,{align:"center",mgBottom:"3","data-testid":"PurchaseSection-choose-quantity-wrapper",children:[Object(C.jsx)(v.a,{name:"quantity",maxQuantity:n,value:j,incremented:function(){j<n&&m((function(t){return t+1}))},decremented:function(){j>1&&m((function(t){return t-1}))},changed:function(t){var e=+t.target.value||"";e&&(e<1||e>n)||m(e)},blured:function(t){var e=+t.target.value;m(!e||e<1?1:e>n?n:e)}}),Object(C.jsxs)(p.a,{size:"2",mgLeft:"1","data-testid":"PurchaseSection-product-quantity",children:["of ".concat(n," piece").concat(n>1?"s":""),z&&Object(C.jsxs)(p.a,{color:k.a.colors.light4,"data-testid":"PurchaseSection-quantity-in-cart",children:["\xa0","(".concat(z.quantity," in cart)")]})]})]}),L,Object(C.jsx)(x.a,{filled:!0,stretch:!0,clicked:function(){u?(null===u||void 0===u?void 0:u.status)!==E.z.ACTIVE?i(E.m.PENDING_USER_INFO):N(d,{product:e,quantity:j}):i(E.m.LOGIN)},isLoading:w,children:"buy now"})]})}return Object(C.jsx)(g,{children:T})}S.defaultProps={productSellerUsername:void 0,userProfile:null};var w=n(110),D=n(5),I=n(88),N=n(115);function T(){var t=Object(a.m)().id,e=Object(I.a)(),n=Object(s.c)((function(t){return t.auth.profile})),c=Object(s.c)((function(t){return t.product.productDetails})),i=Object(s.b)(),u=Object(r.useCallback)((function(t){return i(l.p(t))}),[i]),d=Object(r.useCallback)((function(){return i(l.E())}),[i]),O=Object(r.useCallback)((function(t){return i(l.B(t))}),[i]);Object(r.useEffect)((function(){return u(t),Object(D.k)(),function(){return d()}}),[t,u,d]);var g="Offer is loading... - E-Shopping",v=Object(C.jsx)(b.a,{align:"center"});if(null===c)g="Offer does not exist - E-Shopping",v=Object(C.jsx)(f.a,{variant:"h4",align:"center",lineHeight:"4",children:"Such product does not exist or has already been sold"});else if(c){var T=c.condition,q=c.description,z=c.name,L=c.photo,Q=c.price,B=c.quantity,_=c.quantitySold,U=c.buyerQuantity,A=c.seller,F=c._id;g="".concat(z," - E-Shopping");var R=null;_>=1&&(R=Object(C.jsxs)(p.a,{size:"2",mgBottom:"3",color:k.a.colors.light4,"data-testid":"ProductDetails-quantity-sold",children:[1===U?"1 person":"".concat(U," people")," bought ",_," ",1===_?"unit":"units"]}));var G=Object(C.jsx)(f.a,{variant:"h4",mgTop:"3","data-testid":"ProductDetails-no-description",children:"This product has no description"});q&&(G=Object(C.jsxs)("section",{"data-testid":"ProductDetails-full-description",children:[Object(C.jsx)(f.a,{variant:"h4",mgBottom:"2",mgTop:"3",children:"Description"}),Object(C.jsx)(p.a,{size:"3",lineHeight:"5",children:q})]}));var H=(null===n||void 0===n?void 0:n.username)===A.username,M=null,V=null;H&&(M=Object(C.jsx)(x.a,{color:"blue",clicked:function(){return O(E.m.EDIT_PRODUCT)},"data-testid":"ProductDetails-edit-button",children:"Edit offer"})),(H||(null===n||void 0===n?void 0:n.isAdmin))&&(V=Object(C.jsx)(x.a,{color:"red",clicked:function(){return O(E.m.DELETE_PRODUCT)},"data-testid":"ProductDetails-delete-button",children:"Delete offer"}));var W=null;(V||M)&&(W=Object(C.jsxs)(y.a,{mgTop:"5",justify:"center",spacing:"3",children:[M,V]}));var J=T!==E.o.NOT_APPLICABLE?T:"not applicable";v=Object(C.jsx)(j.a,{children:Object(C.jsxs)(h,{children:[Object(C.jsxs)(m.a,{proportion:e.width<=900?"1/1":"3/2",makeVerticalWhen:600,children:[Object(C.jsx)("section",{className:"photo-section",children:Object(C.jsx)("img",{src:L?"".concat("https://fifth-saber-booth.glitch.me","/products/").concat(F,"/photo"):w.a,alt:z,className:"photo"})}),Object(C.jsxs)("section",{className:"data-section",children:[Object(C.jsx)(f.a,{variant:"h4",children:z}),Object(C.jsxs)(p.a,{size:"2",mgTop:"2",mgBottom:"2",children:[Object(C.jsx)(p.a,{color:k.a.colors.light4,children:"from\xa0"}),Object(C.jsx)(o.Link,{to:"/user/".concat(A.username,"?p=1"),"data-testid":"ProductDetails-seller-link",children:Object(C.jsx)(P.a,{children:A.username})})]}),Object(C.jsxs)(p.a,{size:"2",children:[Object(C.jsx)(p.a,{color:k.a.colors.light4,children:"Condition:"})," ".concat(J.slice(0,1).toUpperCase()).concat(J.slice(1))]}),Object(C.jsx)(p.a,{size:"6",spacing:"1px",mgTop:"3",mgBottom:"3",children:Object(D.d)(Q)}),R,Object(C.jsx)(S,{productId:t,productQuantity:B,productSellerUsername:A.username,onSetModal:O,userProfile:n})]})]}),G,W]})})}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(N.a,{title:g,description:"Check out details about this products"}),v]})}}}]);