(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[4],{220:function(e,n,t){"use strict";var r=t(4),a=t(0),c=t.n(a),l=t(3),i=t(78),o=t(17);function u(){return(u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var m=c.a.createElement("path",{d:"M0 10h24v4H0z"}),f=function(e){var n=e.svgRef,t=e.title,r=s(e,["svgRef","title"]);return c.a.createElement("svg",u({viewBox:"0 0 24 24",width:24,height:24,ref:n},r),t?c.a.createElement("title",null,t):null,m)},p=c.a.forwardRef((function(e,n){return c.a.createElement(f,u({svgRef:n},e))})),d=(t.p,t(82)),v=t(43);function h(){var e=Object(r.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"]);return h=function(){return e},e}var b={};b.Wrapper=l.c.div(h(),(function(e){return e.theme.colors.light4}),(function(e){return e.theme.spacings.level2}));var g=function(e){var n=e.name,t=e.value,r=e.maxQuantity,a=e.incremented,l=e.decremented,u=e.changed,s=e.blured,m=e.focused;return c.a.createElement(b.Wrapper,null,c.a.createElement("button",{type:"button",className:"button minus",disabled:t<=1,onClick:l},c.a.createElement(o.a,{size:"small",color:t<=1?v.a.colors.light2:""},c.a.createElement(p,null))),c.a.createElement(i.a,{name:n,size:"small",value:t,changed:u,blured:s,focused:m,focusable:!1}),c.a.createElement("button",{type:"button",className:"button plus",disabled:t>=r,onClick:a},c.a.createElement(o.a,{size:"small",color:t>=r?v.a.colors.light2:""},c.a.createElement(d.a,null))))};g.defaultProps={focused:function(){}};n.a=g},221:function(e,n,t){"use strict";var r=t(12),a=t(4),c=t(0),l=t.n(c),i=t(3),o=t(80);function u(){var e=Object(a.a)(["\n  position: sticky;\n  top: calc(6.5rem + ",");\n  width: 100%;\n\n  & > *:first-child {\n    transition: padding ","s;\n  }\n\n  &.is-sticky {\n    border-top: 1px solid ",";\n  }\n\n  @media only screen and (max-width: 75em) {\n    bottom: -1px;\n    padding-bottom: 1px;\n\n    & > *:first-child {\n      padding: ",";\n      transition: width ","s;\n    }\n  }\n"]);return u=function(){return e},e}var s={};s.Wrapper=i.c.section(u(),(function(e){return e.theme.spacings.level3}),(function(e){return e.theme.durations.level2}),(function(e){return e.theme.colors.light3}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.durations.level2}));n.a=function(e){var n=e.children,t=Object(c.useRef)(null);return Object(c.useEffect)((function(){t.current&&new IntersectionObserver((function(e){var n=Object(r.a)(e,1)[0];return n.target.classList.toggle("is-sticky",n.intersectionRatio<1)}),{threshold:[1]}).observe(t.current)}),[]),l.a.createElement(s.Wrapper,{ref:t},l.a.createElement(o.a,null,n))}},222:function(e,n,t){"use strict";var r=t(4),a=t(0),c=t.n(a),l=t(3),i=t(27),o=t(5);function u(){var e=Object(r.a)(["\n  font-size: ",";\n\n  & .value {\n    font-size: ",";\n    letter-spacing: 1px;\n  }\n"]);return u=function(){return e},e}var s={};s.Wrapper=Object(l.c)(i.a)(u(),(function(e){return e.theme.fontSizes.level4}),(function(e){return e.theme.fontSizes.level6}));n.a=function(e){var n=e.value;return c.a.createElement(s.Wrapper,{align:"center",justify:"center",wrap:"wrap",spacing:"level1"},c.a.createElement("span",null,"To pay"),c.a.createElement("span",{className:"value"},Object(o.c)(n)))}},223:function(e,n,t){"use strict";var r=t(9),a=t(12),c=t(4),l=t(0),i=t.n(l),o=t(3),u=t(13),s=t(5),m=t(104),f=t(27),p=t(81);function d(){var e=Object(c.a)(["\n  padding: calc(1.5 * ",") 0;\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n\n  & .name {\n    font-size: ",";\n\n    & > a {\n      transition: color ","s;\n\n      &:hover {\n        color: ",";\n      }\n    }\n  }\n\n  & .overall-price {\n    font-size: ",";\n  }\n\n  & .price-per-piece {\n    font-size: ",";\n  }\n"]);return d=function(){return e},e}var v={};v.Wrapper=Object(o.c)(f.a)(d(),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.fontSizes.level3}),(function(e){return e.theme.durations.level1}),(function(e){return e.theme.colors.green}),(function(e){return e.theme.fontSizes.level4}),(function(e){return e.theme.fontSizes.level2}));var h=function(e){var n=e.data,t=n._id,r=n.name,a=n.price,c=n.quantity,l=n.photo;return i.a.createElement(v.Wrapper,null,i.a.createElement(u.Link,{to:"/products/".concat(t),"data-test":"product-link"},i.a.createElement(p.a,{photo:l,alt:r,productId:t,width:7,height:7})),i.a.createElement(f.a,{direction:"column",justify:"center",spacing:"level1"},i.a.createElement("span",{className:"name"},i.a.createElement(u.Link,{to:"/products/".concat(t),"data-test":"product-link"},r)),i.a.createElement(f.a,{justify:"space-between"},i.a.createElement(m.b,{className:"price-per-piece"},"".concat(c," x ").concat(Object(s.c)(a))),i.a.createElement("span",{className:"overall-price"},Object(s.c)(a*c)))))},b=t(6),g=t(7);function E(){var e=Object(c.a)(["\n  align-items: center;\n  display: flex;\n  flex-wrap: wrap;\n  padding: calc(1.5 * ",") 0;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n\n  & .photo-and-name {\n    align-items: center;\n    display: flex;\n  }\n\n  & .name {\n    font-size: ",";\n    margin-left: ",";\n    width: 31rem;\n\n    & > a {\n      transition: color ","s;\n\n      &:hover {\n        color: ",";\n      }\n    }\n  }\n\n  & .mobile-lower-row {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n    flex: 1;\n  }\n\n  & .choose-quantity-box {\n    align-items: center;\n    display: flex;\n  }\n\n  & .quantity-number {\n    font-size: ",";\n    margin-left: ",";\n  }\n\n  & .price-box {\n    align-items: flex-end;\n    display: flex;\n    flex-direction: column;\n    height: ",";\n    justify-content: center;\n  }\n\n  & .overall-price {\n    font-size: ",";\n  }\n\n  & .price-per-piece {\n    font-size: ",";\n    text-align: right;\n  }\n\n  & .remove-icon {\n    cursor: pointer;\n    justify-self: right;\n    margin-left: ",";\n    padding: calc(0.5 * ",");\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .mobile-lower-row {\n      margin-top: ",";\n      min-width: 100%;\n      order: 1;\n    }\n\n    & .name {\n      width: auto;\n    }\n\n    & .remove-icon {\n      margin-left: auto;\n      padding-left: calc(\n        0.5 * "," + ","\n      );\n    }\n  }\n\n  @media only screen and (max-width: 37.5em) {\n    & .name {\n      margin-left: ",";\n    }\n  }\n"]);return E=function(){return e},e}var y=o.c.div(E(),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.colors.light2}),(function(e){return e.theme.fontSizes.level3}),(function(e){return e.theme.spacings.level3}),(function(e){return e.theme.durations.level1}),(function(e){return e.theme.colors.green}),(function(e){return e.theme.fontSizes.level2}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level4}),(function(e){return e.theme.fontSizes.level5}),(function(e){return e.theme.fontSizes.level2}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level2})),O=t(220),j=t(1),w=t(17);function x(){return(x=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function k(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var z=i.a.createElement("path",{d:"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"}),N=function(e){var n=e.svgRef,t=e.title,r=k(e,["svgRef","title"]);return i.a.createElement("svg",x({width:24,height:24,viewBox:"0 0 24 24",ref:n},r),t?i.a.createElement("title",null,t):null,z)},S=i.a.forwardRef((function(e,n){return i.a.createElement(N,x({svgRef:n},e))})),R=(t.p,t(43)),C=function(e){var n=e.data,t=e.isCartLoading,r=n._id,c=n.quantity,o=n.product,f=o._id,d=o.name,v=o.price,h=o.photo,E=o.quantity,x=Object(l.useState)(c),k=Object(a.a)(x,2),z=k[0],N=k[1],C=Object(l.useState)(!1),L=Object(a.a)(C,2),P=L[0],I=L[1],q=Object(b.b)(),T=Object(l.useCallback)((function(e,n,t){return q(g.x(e,n,t))}),[q]),W=Object(l.useCallback)((function(e){return q(g.t(e))}),[q]);Object(l.useEffect)((function(){N((function(e){return e===c||t||P?e:c}))}),[c,z,N,P,t]);return i.a.createElement(y,null,i.a.createElement("div",{className:"photo-and-name"},i.a.createElement(u.Link,{to:"/products/".concat(f),"data-test":"product-link"},i.a.createElement(p.a,{photo:h,alt:d,productId:f,width:7,height:7})),i.a.createElement("span",{className:"name"},i.a.createElement(u.Link,{to:"/products/".concat(f),"data-test":"product-link"},d))),i.a.createElement("div",{className:"mobile-lower-row"},i.a.createElement("div",{className:"choose-quantity-box"},i.a.createElement(O.a,{maxQuantity:E,value:z,incremented:function(){N((function(e){return e<E?e+1:e})),T(r,j.p.INCREMENT)},decremented:function(){N((function(e){return e>0?e-1:e})),T(r,j.p.DECREMENT)},name:"quantity",changed:function(e){var n=+e.target.value||"";n||N(n),n<1||n>E||N(n)},blured:function(e){var n=+e.target.value;!n||n<1?(N(1),T(r,j.p.NUMBER,1)):n>E?(N(E),T(r,j.p.NUMBER,E)):n!==c&&T(r,j.p.NUMBER,n),I(!1)},focused:function(){return I(!0)}}),i.a.createElement("span",{className:"quantity-number"},"of ".concat(E))),i.a.createElement("div",{className:"price-box"},i.a.createElement("span",{className:"overall-price"},Object(s.c)(v*c)),c>1&&i.a.createElement(m.b,{className:"price-per-piece"},"per piece ".concat(Object(s.c)(v))))),i.a.createElement(w.a,{size:"medium",color:R.a.colors.red,onClick:function(){return W(r)},className:"remove-icon"},i.a.createElement(S,null)))};function L(){var e=Object(c.a)(["\n  padding: "," 0;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n\n  & .seller {\n    font-size: ",";\n    margin-bottom: calc(0.5 * ",");\n  }\n"]);return L=function(){return e},e}var P={};P.SingleSeller=o.c.div(L(),(function(e){return e.theme.spacings.level3}),(function(e){return e.theme.colors.light3}),(function(e){return e.theme.fontSizes.level3}),(function(e){return e.theme.spacings.level2}));var I=function(e){var n=e.items,t=e.type,c=e.isCartLoading,l=n.reduce((function(e,n){var r=t===j.a.CART?n.product.seller.username:n.seller.username;return e[r]||(e[r]={items:[],sellerUsername:r}),e[r].items.push(n),e}),{});return Object.entries(l).map((function(e){var n=Object(a.a)(e,2),t=n[0],c=n[1];return Object(r.a)({sellerUsername:t},c)})).map((function(e){var n=e.sellerUsername,r=e.items;return i.a.createElement(P.SingleSeller,{key:n},i.a.createElement("div",{className:"seller"},i.a.createElement("span",null,"seller "),i.a.createElement(u.Link,{to:"/user/".concat(n,"?p=1"),"data-test":"user-link"},i.a.createElement(m.c,null,n))),t===j.a.CART?r.map((function(e){return i.a.createElement(C,{key:e._id,data:e,isCartLoading:c})})):r.map((function(e){return i.a.createElement(h,{key:e._id,data:e})})))}))};I.defaultProps={isCartLoading:void 0};n.a=I},228:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(6),l=t(7),i=t(24),o=t(29),u=t(27),s=t(80),m=t(221),f=t(1),p=t(20),d=t(14),v=t(104),h=function(){var e=Object(c.c)((function(e){return e.auth.deliveryAddress})),n=e.firstName,t=e.lastName,i=e.street,o=e.zipCode,m=e.city,h=e.country,b=e.phone,g=Object(c.b)(),E=Object(r.useCallback)((function(e,n){return g(l.u(e,n))}),[g]),y=["".concat(n," ").concat(t),i,"".concat(o," ").concat(m),h,b];return a.a.createElement(s.a,null,a.a.createElement(u.a,{direction:"column",align:"start"},a.a.createElement(p.a,{variant:"h4"},"Delivery address"),a.a.createElement(u.a,{direction:"column",spacing:"level1"},y.map((function(e,n){return a.a.createElement(v.d,{key:n},e)}))),a.a.createElement(d.a,{clicked:function(){return E(!0,f.j.CHANGE_DELIVERY_ADDRESS)}},"Change address")))},b=t(222),g=t(223);n.default=function(){var e=Object(i.k)(),n=Object(c.c)((function(e){return e.auth.transaction})),t=Object(c.b)(),v=Object(r.useCallback)((function(e,n){return t(l.u(e,n))}),[t]);Object(r.useEffect)((function(){(!n||(null===n||void 0===n?void 0:n.length)<=0)&&(e.length>2?e.goBack():e.replace("/cart"))}),[e,n]);var E=null;if((null===n||void 0===n?void 0:n.length)>0){var y=n.reduce((function(e,n){return e+n.price*n.quantity}),0),O=Math.round(100*(y+Number.EPSILON))/100;E=a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{variant:"h3"},"Transaction"),a.a.createElement(o.a,{proportion:"3/1",makeVerticalWhen:1200},a.a.createElement(u.a,{direction:"column",align:"stretch"},a.a.createElement(h,null),a.a.createElement(s.a,null,a.a.createElement(p.a,{variant:"h4"},"Products"),a.a.createElement(g.a,{items:n,type:f.a.TRANSACTION}))),a.a.createElement(m.a,null,a.a.createElement(u.a,{direction:"column",spacing:"level2"},a.a.createElement(b.a,{value:O}),a.a.createElement(d.a,{filled:!0,clicked:function(){return v(!0,f.j.BUY_PRODUCTS)}},"I buy and pay")))))}return E}}}]);