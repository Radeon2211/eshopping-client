{"version":3,"sources":["containers/OtherUser/OtherUser.js"],"names":["OtherUser","match","location","history","otherUserUsername","params","username","search","userProfile","useSelector","state","auth","profile","currentUserUsername","otherUser","productsPerPage","ui","dispatch","useDispatch","onFetchOtherUser","useCallback","actions","onSetOtherUser","user","onFetchProducts","queryParams","pageType","useEffect","replace","productPages","USER_PRODUCTS","scrollToTop","undefined","pageTitle","content","align","variant","lineHeight","data-testid","email","phone","contactData","mgBottom","wrap","spacing","size","weight","page","title","description"],"mappings":"oIAAA,gJAYe,SAASA,EAAT,GAAkD,IAA7BC,EAA4B,EAA5BA,MAAOC,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,QAE7BC,EAClBH,EADFI,OAAUC,SAEJC,EAAWL,EAAXK,OAEFC,EAAcC,aAAY,SAACC,GAAD,OAAWA,EAAMC,KAAKC,WAChDC,EAAmB,OAAGL,QAAH,IAAGA,OAAH,EAAGA,EAAaF,SACnCQ,EAAYL,aAAY,SAACC,GAAD,OAAWA,EAAMC,KAAKG,aAC9CC,EAAkBN,aAAY,SAACC,GAAD,OAAWA,EAAMM,GAAGD,mBAElDE,EAAWC,cACXC,EAAmBC,uBACvB,SAACd,GAAD,OAAcW,EAASI,IAAuBf,MAC9C,CAACW,IAEGK,EAAiBF,uBAAY,SAACG,GAAD,OAAUN,EAASI,IAAqBE,MAAQ,CAACN,IAC9EO,EAAkBJ,uBACtB,SAACK,EAAaC,EAAUpB,GAAxB,OACEW,EAASI,IAAsBI,EAAaC,EAAUpB,MACxD,CAACW,IAGHU,qBAAU,WAQR,OAPIvB,IAAsBS,EACxBV,EAAQyB,QAAQ,qBAEhBT,EAAiBf,GACjBoB,EAAgBjB,EAAQsB,IAAaC,cAAe1B,GACpD2B,eAEK,kBAAMT,OAAeU,MAC3B,CACD5B,EACAS,EACAM,EACAK,EACAT,EACAO,EACAf,EACAJ,IAGF,IAAI8B,EAAY,uCACZC,EAAU,cAAC,IAAD,CAAQC,MAAM,WAC5B,GAAkB,OAAdrB,EACFmB,EAAY,8BACZC,EACE,cAAC,IAAD,CAASE,QAAQ,KAAKD,MAAM,SAASE,WAAW,IAAIC,cAAY,kBAAhE,+EAIG,GAAIxB,EAAW,CACpB,IAAQR,EAA2BQ,EAA3BR,SAAUiC,EAAiBzB,EAAjByB,MAAOC,EAAU1B,EAAV0B,MAEzBP,EAAS,gBAAY7B,EAAZ,kBAET,IAAIqC,EACF,cAAC,IAAD,CAASL,QAAQ,KAAKM,SAAS,IAAIJ,cAAY,yBAA/C,4DAIEC,GAASC,KACXC,EACE,eAAC,IAAD,CAAaE,KAAK,OAAOD,SAAS,IAAIE,QAAQ,IAA9C,UACGL,GACC,eAAC,IAAD,CAAWM,KAAK,IAAIP,cAAY,0BAAhC,UACE,cAAC,IAAD,CAAWQ,OAAO,MAAlB,wBACCP,KAGJC,GACC,eAAC,IAAD,CAAWK,KAAK,IAAIP,cAAY,0BAAhC,UACE,cAAC,IAAD,CAAWQ,OAAO,MAAlB,+BACCN,SAOXN,EACE,qCACE,cAAC,IAAD,CAASE,QAAQ,KAAjB,SAAuB9B,IACtBmC,EACD,cAAC,IAAD,CAAoBM,KAAMlB,IAAaC,mBAK7C,OACE,qCACE,cAAC,IAAD,CACEkB,MAAOf,EACPgB,YAAY,4DAEbf","file":"static/js/9.13b9b7a4.chunk.js","sourcesContent":["import React, { useEffect, useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport * as actions from '../../store/actions/indexActions';\r\nimport Heading from '../../components/UI/Heading/Heading';\r\nimport Loader from '../../components/UI/Loader/Loader';\r\nimport PlainText from '../../components/UI/PlainText';\r\nimport ProductsAndFilters from '../../components/ProductsAndFilters/ProductsAndFilters';\r\nimport { productPages } from '../../shared/constants';\r\nimport FlexWrapper from '../../components/UI/FlexWrapper';\r\nimport { scrollToTop } from '../../shared/utility/utility';\r\nimport MetaDescriptor from '../../components/MetaDescriptor/MetaDescriptor';\r\n\r\nexport default function OtherUser({ match, location, history }) {\r\n  const {\r\n    params: { username: otherUserUsername },\r\n  } = match;\r\n  const { search } = location;\r\n\r\n  const userProfile = useSelector((state) => state.auth.profile);\r\n  const currentUserUsername = userProfile?.username;\r\n  const otherUser = useSelector((state) => state.auth.otherUser);\r\n  const productsPerPage = useSelector((state) => state.ui.productsPerPage);\r\n\r\n  const dispatch = useDispatch();\r\n  const onFetchOtherUser = useCallback(\r\n    (username) => dispatch(actions.fetchOtherUser(username)),\r\n    [dispatch],\r\n  );\r\n  const onSetOtherUser = useCallback((user) => dispatch(actions.setOtherUser(user)), [dispatch]);\r\n  const onFetchProducts = useCallback(\r\n    (queryParams, pageType, username) =>\r\n      dispatch(actions.fetchProducts(queryParams, pageType, username)),\r\n    [dispatch],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (otherUserUsername === currentUserUsername) {\r\n      history.replace('/my-account/data');\r\n    } else {\r\n      onFetchOtherUser(otherUserUsername);\r\n      onFetchProducts(search, productPages.USER_PRODUCTS, otherUserUsername);\r\n      scrollToTop();\r\n    }\r\n    return () => onSetOtherUser(undefined);\r\n  }, [\r\n    otherUserUsername,\r\n    currentUserUsername,\r\n    onFetchOtherUser,\r\n    onFetchProducts,\r\n    productsPerPage,\r\n    onSetOtherUser,\r\n    search,\r\n    history,\r\n  ]);\r\n\r\n  let pageTitle = 'User info is loading... - E-Shopping';\r\n  let content = <Loader align=\"center\" />;\r\n  if (otherUser === null) {\r\n    pageTitle = 'User not found - E-Shopping';\r\n    content = (\r\n      <Heading variant=\"h4\" align=\"center\" lineHeight=\"4\" data-testid=\"OtherUser-error\">\r\n        Such user does not exist or problem during fetching occurred\r\n      </Heading>\r\n    );\r\n  } else if (otherUser) {\r\n    const { username, email, phone } = otherUser;\r\n\r\n    pageTitle = `User \"${otherUserUsername}\" - E-Shopping`;\r\n\r\n    let contactData = (\r\n      <Heading variant=\"h4\" mgBottom=\"3\" data-testid=\"OtherUser-data-private\">\r\n        This user has his contact data set to private\r\n      </Heading>\r\n    );\r\n    if (email || phone) {\r\n      contactData = (\r\n        <FlexWrapper wrap=\"wrap\" mgBottom=\"3\" spacing=\"3\">\r\n          {email && (\r\n            <PlainText size=\"4\" data-testid=\"OtherUser-email-wrapper\">\r\n              <PlainText weight=\"700\">Email:&nbsp;</PlainText>\r\n              {email}\r\n            </PlainText>\r\n          )}\r\n          {phone && (\r\n            <PlainText size=\"4\" data-testid=\"OtherUser-phone-wrapper\">\r\n              <PlainText weight=\"700\">Phone number:&nbsp;</PlainText>\r\n              {phone}\r\n            </PlainText>\r\n          )}\r\n        </FlexWrapper>\r\n      );\r\n    }\r\n\r\n    content = (\r\n      <>\r\n        <Heading variant=\"h3\">{username}</Heading>\r\n        {contactData}\r\n        <ProductsAndFilters page={productPages.USER_PRODUCTS} />\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <MetaDescriptor\r\n        title={pageTitle}\r\n        description=\"Check out informations about this user and his products\"\r\n      />\r\n      {content}\r\n    </>\r\n  );\r\n}\r\n"],"sourceRoot":""}