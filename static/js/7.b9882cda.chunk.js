(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[7],{356:function(t,e,n){"use strict";var c,i=n(9),r=n(0),a=n(8),o=n(65),s=n(23);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var n,c,i=function(t,e){if(null==t)return{};var n,c,i={},r=Object.keys(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t,e){var n=t.title,i=t.titleId,a=u(t,["title","titleId"]);return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:e,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,c||(c=r.createElement("path",{d:"M0 10h24v4H0z"})))}var h,j=r.forwardRef(d),b=(n.p,n(70)),p=n(21),m=n(1),f={};f.Wrapper=a.c.div(h||(h=Object(i.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"])),(function(t){return t.theme.colors.light4}),(function(t){return t.theme.spacings.level2}));var O=function(t){var e=t.name,n=t.value,c=t.maxQuantity,i=t.incremented,r=t.decremented,a=t.changed,l=t.blured,u=t.focused;return Object(m.jsxs)(f.Wrapper,{children:[Object(m.jsx)("button",{type:"button",className:"button minus",disabled:n<=1,onClick:r,"data-testid":"ChooseQuantity-minus-btn","aria-label":"Decrease product quantity",children:Object(m.jsx)(s.a,{size:"small",color:n<=1?p.a.colors.light2:"","data-testid":"ChooseQuantity-minus-icon",children:Object(m.jsx)(j,{})})}),Object(m.jsx)(o.a,{name:e,size:"small",value:n,changed:a,blured:l,focused:u}),Object(m.jsx)("button",{type:"button",className:"button plus",disabled:n>=c,onClick:i,"data-testid":"ChooseQuantity-plus-btn","aria-label":"Increase product quantity",children:Object(m.jsx)(s.a,{size:"small",color:n>=c?p.a.colors.light2:"","data-testid":"ChooseQuantity-plus-icon",children:Object(m.jsx)(b.a,{})})})]})};O.defaultProps={focused:function(){}};e.a=O},364:function(t,e,n){"use strict";n.r(e);var c,i,r=n(0),a=n(25),o=n(16),s=n(6),l=n(10),u=n(9),d=n(8),h=d.c.div(c||(c=Object(u.a)(["\n  & .photo-section {\n    align-items: center;\n    display: flex;\n    height: 45rem;\n    justify-content: center;\n    margin-right: ",";\n    padding: "," ",";\n    width: 100%;\n  }\n\n  & .photo {\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  & .data-section {\n    align-self: stretch;\n    display: flex;\n    flex-direction: column;\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .photo-section {\n      margin-right: ",";\n    }\n  }\n"])),(function(t){return t.theme.spacings.level5}),(function(t){return t.theme.spacings.level1}),(function(t){return t.theme.spacings.level2}),(function(t){return t.theme.spacings.level3})),j=n(51),b=n(68),p=n(12),m=n(24),f=n(28),O=n(15),g=d.c.div(i||(i=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n\n  & > button:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(t){return t.theme.spacings.level2})),v=n(2),x=n(17),y=n(356),P=n(56),k=n(21),w=n(20),C=n(1),D=function(t){var e=t.productId,n=t.productQuantity,c=t.productSellerUsername,i=t.onSetModal,u=t.userProfile,d=Object(a.k)(),h=Object(r.useState)(1),j=Object(O.a)(h,2),b=j[0],f=j[1],D=Object(s.c)((function(t){return t.auth.cart})),E=Object(s.c)((function(t){return t.ui.isCartLoading})),S=Object(s.b)(),I=Object(r.useCallback)((function(t){return S(l.b(t))}),[S]),N=Object(r.useCallback)((function(t,e){return S(l.s(t,e))}),[S]),q=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a,{size:"2",children:"Quantity: ".concat(n)}),Object(C.jsx)(m.a,{variant:"h4",mgTop:"3",children:"You are the seller of this product"})]});if((null===u||void 0===u?void 0:u.username)!==c){var T,z=null;D&&(z=D.find((function(t){return t.product._id===e})));var L=Object(C.jsx)(x.a,{filled:!0,stretch:!0,clicked:function(){u?"active"!==(null===u||void 0===u?void 0:u.status)?i(v.m.PENDING_USER_INFO):I({quantity:b,product:e}):i(v.m.LOGIN)},isLoading:E,children:"add to cart"});(null===(T=z)||void 0===T?void 0:T.quantity)>=n&&(L=Object(C.jsxs)(m.a,{variant:"h4",align:"center",mgBottom:"2","data-testid":"PurchaseSection-not-able-to-add",children:["You have added all pieces to\xa0",Object(C.jsx)(o.Link,{to:"/cart",children:Object(C.jsx)(P.a,{children:"cart"})})]})),q=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(w.a,{align:"center",mgBottom:"3","data-testid":"PurchaseSection-choose-quantity-wrapper",children:[Object(C.jsx)(y.a,{name:"quantity",maxQuantity:n,value:b,incremented:function(){b<n&&f((function(t){return t+1}))},decremented:function(){b>1&&f((function(t){return t-1}))},changed:function(t){var e=+t.target.value||"";e&&(e<1||e>n)||f(e)},blured:function(t){var e=+t.target.value;f(!e||e<1?1:e>n?n:e)}}),Object(C.jsxs)(p.a,{size:"2",mgLeft:"1","data-testid":"PurchaseSection-product-quantity",children:["of ".concat(n," piece").concat(n>1?"s":""),z&&Object(C.jsxs)(p.a,{color:k.a.colors.light4,"data-testid":"PurchaseSection-quantity-in-cart",children:["\xa0","(".concat(z.quantity," in cart)")]})]})]}),L,Object(C.jsx)(x.a,{filled:!0,stretch:!0,clicked:function(){u?"active"!==(null===u||void 0===u?void 0:u.status)?i(v.m.PENDING_USER_INFO):N(d,{product:e,quantity:b}):i(v.m.LOGIN)},isLoading:E,children:"buy now"})]})}return Object(C.jsx)(g,{children:q})};D.defaultProps={productSellerUsername:void 0,userProfile:null};var E=D,S=n(101),I=n(4),N=n(80);e.default=function(){var t=Object(a.m)().id,e=Object(N.a)(),n=Object(s.c)((function(t){return t.auth.profile})),c=Object(s.c)((function(t){return t.product.productDetails})),i=Object(s.b)(),u=Object(r.useCallback)((function(t){return i(l.p(t))}),[i]),d=Object(r.useCallback)((function(){return i(l.E())}),[i]),O=Object(r.useCallback)((function(t){return i(l.B(t))}),[i]);Object(r.useEffect)((function(){return u(t),Object(I.k)(),function(){return d()}}),[t,u,d]);var g=Object(C.jsx)(j.a,{align:"center"});if(null===c)g=Object(C.jsx)(m.a,{variant:"h4",align:"center",lineHeight:"4",children:"Such product does not exist or has already been sold"});else if(c){var y=c.condition,D=c.description,q=c.name,T=c.photo,z=c.price,L=c.quantity,Q=c.quantitySold,B=c.buyerQuantity,_=c.seller,U=c._id,R=null;Q>=1&&(R=Object(C.jsxs)(p.a,{size:"2",mgBottom:"3",color:k.a.colors.light4,"data-testid":"ProductDetails-quantity-sold",children:[1===B?"1 person":"".concat(B," people")," bought ",Q," ",1===Q?"unit":"units"]}));var F=Object(C.jsx)(m.a,{variant:"h4",mgTop:"3","data-testid":"ProductDetails-no-description",children:"This product has no description"});D&&(F=Object(C.jsxs)("section",{"data-testid":"ProductDetails-full-description",children:[Object(C.jsx)(m.a,{variant:"h4",mgBottom:"2",mgTop:"3",children:"Description"}),Object(C.jsx)(p.a,{size:"3",lineHeight:"5",children:D})]}));var G=(null===n||void 0===n?void 0:n.username)===_.username,A=null,H=null;G&&(A=Object(C.jsx)(x.a,{color:"blue",clicked:function(){return O(v.m.EDIT_PRODUCT)},"data-testid":"ProductDetails-edit-button",children:"Edit offer"})),(G||(null===n||void 0===n?void 0:n.isAdmin))&&(H=Object(C.jsx)(x.a,{color:"red",clicked:function(){return O(v.m.DELETE_PRODUCT)},"data-testid":"ProductDetails-delete-button",children:"Delete offer"}));var M=null;(H||A)&&(M=Object(C.jsxs)(w.a,{mgTop:"5",justify:"center",spacing:"3",children:[A,H]}));var W=y!==v.o.NOT_APPLICABLE?y:"not applicable";g=Object(C.jsx)(b.a,{children:Object(C.jsxs)(h,{children:[Object(C.jsxs)(f.a,{proportion:e.width<=900?"1/1":"3/2",makeVerticalWhen:600,children:[Object(C.jsx)("section",{className:"photo-section",children:Object(C.jsx)("img",{src:T?"".concat("https://radeon2211-eshopping.herokuapp.com","/products/").concat(U,"/photo"):S.a,alt:q,className:"photo"})}),Object(C.jsxs)("section",{className:"data-section",children:[Object(C.jsx)(m.a,{variant:"h4",children:q}),Object(C.jsxs)(p.a,{size:"2",mgTop:"2",mgBottom:"2",children:[Object(C.jsx)(p.a,{color:k.a.colors.light4,children:"from\xa0"}),Object(C.jsx)(o.Link,{to:"/user/".concat(_.username,"?p=1"),"data-testid":"ProductDetails-seller-link",children:Object(C.jsx)(P.a,{children:_.username})})]}),Object(C.jsxs)(p.a,{size:"2",children:[Object(C.jsx)(p.a,{color:k.a.colors.light4,children:"Condition:"})," ".concat(W.slice(0,1).toUpperCase()).concat(W.slice(1))]}),Object(C.jsx)(p.a,{size:"6",spacing:"1px",mgTop:"3",mgBottom:"3",children:Object(I.d)(z)}),R,Object(C.jsx)(E,{productId:t,productQuantity:L,productSellerUsername:_.username,onSetModal:O,userProfile:n})]})]}),F,M]})})}return g}}}]);