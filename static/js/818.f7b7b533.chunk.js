"use strict";(self.webpackChunkeshopping_app_client=self.webpackChunkeshopping_app_client||[]).push([[818],{3963:(e,t,n)=>{n.d(t,{Z:()=>f});var i,s=n(168),l=n(2791),o=n(545),r=n(1132),a=n(3090);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}function d(e,t){let{title:n,titleId:s,...o}=e;return l.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":s},o),n?l.createElement("title",{id:s},n):null,i||(i=l.createElement("path",{d:"M0 10h24v4H0z"})))}const u=l.forwardRef(d);n.p;var h,p=n(571),m=n(5914),g=n(184);const x={};function f(e){const{name:t,value:n,maxQuantity:i,incremented:s,decremented:l,changed:o,blured:c,focused:d}=e;return(0,g.jsxs)(x.Wrapper,{children:[(0,g.jsx)("button",{type:"button",className:"button minus",disabled:n<=1,onClick:l,"data-testid":"ChooseQuantity-minus-btn","aria-label":"Decrease product quantity",children:(0,g.jsx)(a.Z,{size:"small",color:n<=1?m.Z.colors.light2:"","data-testid":"ChooseQuantity-minus-icon",children:(0,g.jsx)(u,{})})}),(0,g.jsx)(r.Z,{name:t,size:"small",value:n,changed:o,blured:c,focused:d}),(0,g.jsx)("button",{type:"button",className:"button plus",disabled:n>=i,onClick:s,"data-testid":"ChooseQuantity-plus-btn","aria-label":"Increase product quantity",children:(0,g.jsx)(a.Z,{size:"small",color:n>=i?m.Z.colors.light2:"","data-testid":"ChooseQuantity-plus-icon",children:(0,g.jsx)(p.r,{})})})]})}x.Wrapper=o.ZP.div(h||(h=(0,s.Z)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"])),(e=>{let{theme:t}=e;return t.colors.light4}),(e=>{let{theme:t}=e;return t.spacings.level2})),f.defaultProps={focused:()=>{}}},9818:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var i,s=n(2791),l=n(8515),o=n(9741),r=n(9434),a=n(134),c=n(168),d=n(545);const u=d.ZP.div(i||(i=(0,c.Z)(["\n  & .photo-section {\n    align-items: center;\n    display: flex;\n    height: 45rem;\n    justify-content: center;\n    margin-right: ",";\n    padding: "," ",";\n    width: 100%;\n  }\n\n  & .photo {\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  & .data-section {\n    align-self: stretch;\n    display: flex;\n    flex-direction: column;\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .photo-section {\n      margin-right: ",";\n    }\n  }\n"])),(e=>{let{theme:t}=e;return t.spacings.level5}),(e=>{let{theme:t}=e;return t.spacings.level1}),(e=>{let{theme:t}=e;return t.spacings.level2}),(e=>{let{theme:t}=e;return t.spacings.level3}));var h,p=n(3288),m=n(2626),g=n(3330),x=n(2778),f=n(4642);const j=d.ZP.div(h||(h=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  & > button:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(e=>{let{theme:t}=e;return t.spacings.level2}));var v=n(132),b=n(3963),Z=n(2268),y=n(593),P=n(5914),C=n(6054),k=(n(9776),n(184));function E(e){const{productId:t,productQuantity:n,productSellerUsername:i,onSetModal:c,userProfile:d}=e,u=(0,l.k6)(),[h,p]=(0,s.useState)(1),m=(0,r.v9)((e=>e.auth.cart)),f=(0,r.v9)((e=>e.ui.isCartLoading)),E=(0,r.I0)(),S=(0,s.useCallback)((e=>E(a._7(e))),[E]),D=(0,s.useCallback)(((e,t)=>E(a.DA(e,t))),[E]),w=e=>{const t=+e.target.value||"";t&&(t<1||t>n)||p(t)},I=e=>{const t=+e.target.value;p(!t||t<1?1:t>n?n:t)},N=()=>{h<n&&p((e=>e+1))},_=()=>{h>1&&p((e=>e-1))},T=()=>{d?(null===d||void 0===d?void 0:d.status)!==C.Nj.ACTIVE?c(C.KW.PENDING_USER_INFO):S({quantity:h,product:t}):c(C.KW.LOGIN)},O=()=>{d?(null===d||void 0===d?void 0:d.status)!==C.Nj.ACTIVE?c(C.KW.PENDING_USER_INFO):D(u,{product:t,quantity:h}):c(C.KW.LOGIN)};let q=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(g.Z,{size:"2",children:"Quantity: ".concat(n)}),(0,k.jsx)(x.Z,{variant:"h4",mgTop:"3",children:"You are the seller of this product"})]});if((null===d||void 0===d?void 0:d.username)!==i){var z;let e=null;m&&(e=m.find((e=>e.product._id===t)));let i=(0,k.jsx)(v.Z,{filled:!0,stretch:!0,clicked:T,isLoading:f,children:"add to cart"});(null===(z=e)||void 0===z?void 0:z.quantity)>=n&&(i=(0,k.jsxs)(x.Z,{variant:"h4",align:"center",mgBottom:"2","data-testid":"PurchaseSection-not-able-to-add",children:["You have added all pieces to\xa0",(0,k.jsx)(o.rU,{to:"/cart",children:(0,k.jsx)(y._,{children:"cart"})})]})),q=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(Z.Z,{align:"center",mgBottom:"3","data-testid":"PurchaseSection-choose-quantity-wrapper",children:[(0,k.jsx)(b.Z,{name:"quantity",maxQuantity:n,value:h,incremented:N,decremented:_,changed:w,blured:I}),(0,k.jsxs)(g.Z,{size:"2",mgLeft:"1","data-testid":"PurchaseSection-product-quantity",children:["of ".concat(n," piece").concat(n>1?"s":""),e&&(0,k.jsxs)(g.Z,{color:P.Z.colors.light4,"data-testid":"PurchaseSection-quantity-in-cart",children:["\xa0","(".concat(e.quantity," in cart)")]})]})]}),i,(0,k.jsx)(v.Z,{filled:!0,stretch:!0,clicked:O,isLoading:f,children:"buy now"})]})}return(0,k.jsx)(j,{children:q})}E.defaultProps={productSellerUsername:void 0,userProfile:null};var S=n(1857),D=n(478),w=n(9141),I=n(3397);function N(){const{id:e}=(0,l.UO)(),t=(0,w.Z)(),n=(0,r.v9)((e=>e.auth.profile)),i=(0,r.v9)((e=>e.product.productDetails)),c=(0,r.I0)(),d=(0,s.useCallback)((e=>c(a.g3(e))),[c]),h=(0,s.useCallback)((()=>c(a.AB())),[c]),j=(0,s.useCallback)((e=>c(a.cf(e))),[c]);(0,s.useEffect)((()=>(d(e),(0,D.k3)(),()=>h())),[e,d,h]);let b="Offer is loading... - E-Shopping",N=(0,k.jsx)(p.Z,{align:"center"});if(null===i)b="Offer does not exist - E-Shopping",N=(0,k.jsx)(x.Z,{variant:"h4",align:"center",lineHeight:"4",children:"Such product does not exist or has already been sold"});else if(i){const{condition:s,description:l,name:r,photo:a,price:c,quantity:d,quantitySold:h,buyerQuantity:p,seller:w,_id:I}=i;b="".concat(r," - E-Shopping");let _=null;h>=1&&(_=(0,k.jsxs)(g.Z,{size:"2",mgBottom:"3",color:P.Z.colors.light4,"data-testid":"ProductDetails-quantity-sold",children:[1===p?"1 person":"".concat(p," people")," bought ",h," ",1===h?"unit":"units"]}));let T=(0,k.jsx)(x.Z,{variant:"h4",mgTop:"3","data-testid":"ProductDetails-no-description",children:"This product has no description"});l&&(T=(0,k.jsxs)("section",{"data-testid":"ProductDetails-full-description",children:[(0,k.jsx)(x.Z,{variant:"h4",mgBottom:"2",mgTop:"3",children:"Description"}),(0,k.jsx)(g.Z,{size:"3",lineHeight:"5",children:l})]}));const O=(null===n||void 0===n?void 0:n.username)===w.username;let q=null,z=null;O&&(q=(0,k.jsx)(v.Z,{color:"blue",clicked:()=>j(C.KW.EDIT_PRODUCT),"data-testid":"ProductDetails-edit-button",children:"Edit offer"})),(O||null!==n&&void 0!==n&&n.isAdmin)&&(z=(0,k.jsx)(v.Z,{color:"red",clicked:()=>j(C.KW.DELETE_PRODUCT),"data-testid":"ProductDetails-delete-button",children:"Delete offer"}));let U=null;(z||q)&&(U=(0,k.jsxs)(Z.Z,{mgTop:"5",justify:"center",spacing:"3",children:[q,z]}));const Q=s!==C.SK.NOT_APPLICABLE?s:"not applicable";N=(0,k.jsx)(m.Z,{children:(0,k.jsxs)(u,{children:[(0,k.jsxs)(f.Z,{proportion:t.width<=900?"1/1":"3/2",makeVerticalWhen:600,children:[(0,k.jsx)("section",{className:"photo-section",children:(0,k.jsx)("img",{src:a?"".concat("https://eshopping-api.vercel.app","/products/").concat(I,"/photo"):S,alt:r,className:"photo"})}),(0,k.jsxs)("section",{className:"data-section",children:[(0,k.jsx)(x.Z,{variant:"h4",children:r}),(0,k.jsxs)(g.Z,{size:"2",mgTop:"2",mgBottom:"2",children:[(0,k.jsx)(g.Z,{color:P.Z.colors.light4,children:"from\xa0"}),(0,k.jsx)(o.rU,{to:"/user/".concat(w.username,"?p=1"),"data-testid":"ProductDetails-seller-link",children:(0,k.jsx)(y._,{children:w.username})})]}),(0,k.jsxs)(g.Z,{size:"2",children:[(0,k.jsx)(g.Z,{color:P.Z.colors.light4,children:"Condition:"})," ".concat(Q.slice(0,1).toUpperCase()).concat(Q.slice(1))]}),(0,k.jsx)(g.Z,{size:"6",spacing:"1px",mgTop:"3",mgBottom:"3",children:(0,D.T4)(c)}),_,(0,k.jsx)(E,{productId:e,productQuantity:d,productSellerUsername:w.username,onSetModal:j,userProfile:n})]})]}),T,U]})})}return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(I.Z,{title:b,description:"Check out details about this products"}),N]})}}}]);
//# sourceMappingURL=818.f7b7b533.chunk.js.map