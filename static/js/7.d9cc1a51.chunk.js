(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[7],{356:function(t,e,n){"use strict";var c,i=n(8),r=n(0),a=n(7),o=n(64),l=n(22);function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var n,c,i=function(t,e){if(null==t)return{};var n,c,i={},r=Object.keys(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t,e){var n=t.title,i=t.titleId,a=u(t,["title","titleId"]);return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:e,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,c||(c=r.createElement("path",{d:"M0 10h24v4H0z"})))}var h,b=r.forwardRef(d),j=(n.p,n(69)),p=n(21),f=n(1),m={};m.Wrapper=a.c.div(h||(h=Object(i.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"])),(function(t){return t.theme.colors.light4}),(function(t){return t.theme.spacings.level2}));var O=function(t){var e=t.name,n=t.value,c=t.maxQuantity,i=t.incremented,r=t.decremented,a=t.changed,s=t.blured,u=t.focused;return Object(f.jsxs)(m.Wrapper,{children:[Object(f.jsx)("button",{type:"button",className:"button minus",disabled:n<=1,onClick:r,"data-testid":"ChooseQuantity-minus-btn",children:Object(f.jsx)(l.a,{size:"small",color:n<=1?p.a.colors.light2:"","data-testid":"ChooseQuantity-minus-icon",children:Object(f.jsx)(b,{})})}),Object(f.jsx)(o.a,{name:e,size:"small",value:n,changed:a,blured:s,focused:u}),Object(f.jsx)("button",{type:"button",className:"button plus",disabled:n>=c,onClick:i,"data-testid":"ChooseQuantity-plus-btn",children:Object(f.jsx)(l.a,{size:"small",color:n>=c?p.a.colors.light2:"","data-testid":"ChooseQuantity-plus-icon",children:Object(f.jsx)(j.a,{})})})]})};O.defaultProps={focused:function(){}};e.a=O},363:function(t,e,n){"use strict";n.r(e);var c,i,r=n(0),a=n(25),o=n(16),l=n(5),s=n(2),u=n(10),d=n(8),h=n(7),b=h.c.div(c||(c=Object(d.a)(["\n  & .photo-section {\n    align-items: center;\n    display: flex;\n    height: 45rem;\n    justify-content: center;\n    margin-right: ",";\n    padding: "," ",";\n    width: 100%;\n  }\n\n  & .photo {\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  & .data-section {\n    align-self: stretch;\n    display: flex;\n    flex-direction: column;\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .photo-section {\n      margin-right: ",";\n    }\n  }\n"])),(function(t){return t.theme.spacings.level5}),(function(t){return t.theme.spacings.level1}),(function(t){return t.theme.spacings.level2}),(function(t){return t.theme.spacings.level3})),j=n(51),p=n(67),f=n(12),m=n(23),O=n(28),g=n(14),v=h.c.div(i||(i=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n\n  & > button:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(t){return t.theme.spacings.level2})),x=n(17),y=n(356),k=n(46),P=n(21),w=n(24),C=n(1),S=function(t){var e=t.productId,n=t.productQuantity,c=t.productSellerUsername,i=t.onSetModal,d=t.userProfile,h=Object(a.k)(),b=Object(r.useState)(1),j=Object(g.a)(b,2),p=j[0],O=j[1],S=Object(l.c)((function(t){return t.auth.cart})),D=Object(l.c)((function(t){return t.ui.isCartLoading})),E=Object(l.b)(),N=Object(r.useCallback)((function(t){return E(u.b(t))}),[E]),q=Object(r.useCallback)((function(t,e){return E(u.t(t,e))}),[E]),I=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(f.a,{size:"2",children:"Quantity: ".concat(n)}),Object(C.jsx)(m.a,{variant:"h4",mgTop:"3",children:"You are the seller of this product"})]});if((null===d||void 0===d?void 0:d.username)!==c){var z,T=null;S&&(T=S.find((function(t){return t.product._id===e})));var Q=Object(C.jsx)(x.a,{filled:!0,stretch:!0,clicked:function(){d?"active"!==(null===d||void 0===d?void 0:d.status)?i(!0,s.k.PENDING_USER_INFO):N({quantity:p,product:e}):i(!0,s.k.LOGIN)},isLoading:D,children:"add to cart"});(null===(z=T)||void 0===z?void 0:z.quantity)>=n&&(Q=Object(C.jsxs)(m.a,{variant:"h4",align:"center",mgBottom:"2","data-testid":"PurchaseSection-not-able-to-add",children:["You have added all pieces to\xa0",Object(C.jsx)(o.Link,{to:"/cart",children:Object(C.jsx)(k.b,{children:"cart"})})]})),I=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(w.a,{align:"center",mgBottom:"3","data-testid":"PurchaseSection-choose-quantity-wrapper",children:[Object(C.jsx)(y.a,{name:"quantity",maxQuantity:n,value:p,incremented:function(){p<n&&O((function(t){return t+1}))},decremented:function(){p>1&&O((function(t){return t-1}))},changed:function(t){var e=+t.target.value||"";e&&(e<1||e>n)||O(e)},blured:function(t){var e=+t.target.value;O(!e||e<1?1:e>n?n:e)}}),Object(C.jsxs)(f.a,{size:"2",mgLeft:"1","data-testid":"PurchaseSection-product-quantity",children:["of ".concat(n," piece").concat(n>1?"s":""),T&&Object(C.jsxs)(f.a,{color:P.a.colors.light4,"data-testid":"PurchaseSection-quantity-in-cart",children:["\xa0","(".concat(T.quantity," in cart)")]})]})]}),Q,Object(C.jsx)(x.a,{filled:!0,stretch:!0,clicked:function(){d?"active"!==(null===d||void 0===d?void 0:d.status)?i(!0,s.k.PENDING_USER_INFO):q(h,{product:e,quantity:p}):i(!0,s.k.LOGIN)},isLoading:D,children:"buy now"})]})}return Object(C.jsx)(v,{children:I})};S.defaultProps={productSellerUsername:void 0,userProfile:null};var D=S,E=n(101),N=n(4),q=n(80);e.default=function(){var t=Object(a.m)().id,e=Object(q.a)(),n=Object(l.c)((function(t){return t.auth.profile})),c=Object(l.c)((function(t){return t.product.productDetails})),i=Object(l.b)(),d=Object(r.useCallback)((function(t){return i(u.q(t))}),[i]),h=Object(r.useCallback)((function(){return i(u.E())}),[i]),g=Object(r.useCallback)((function(t,e){return i(u.B(t,e))}),[i]);Object(r.useEffect)((function(){return d(t),function(){return h()}}),[t,d,h]);var v=Object(C.jsx)(j.a,{align:"center"});if(null===c)v=Object(C.jsx)(m.a,{variant:"h4",align:"center",lineHeight:"4",children:"Such product does not exist or has already been sold"});else if(c){var y=c.condition,S=c.description,I=c.name,z=c.photo,T=c.price,Q=c.quantity,L=c.quantitySold,_=c.buyerQuantity,B=c.seller,U=c._id,R=null;L>=1&&(R=Object(C.jsxs)(f.a,{size:"2",mgBottom:"3",color:P.a.colors.light4,"data-testid":"ProductDetails-quantity-sold",children:[1===_?"1 person":"".concat(_," people")," bought ",L," ",1===L?"unit":"units"]}));var F=Object(C.jsx)(m.a,{variant:"h4",mgTop:"3","data-testid":"ProductDetails-no-description",children:"This product has no description"});S&&(F=Object(C.jsxs)("section",{"data-testid":"ProductDetails-full-description",children:[Object(C.jsx)(m.a,{variant:"h4",mgBottom:"2",mgTop:"3",children:"Description"}),Object(C.jsx)(f.a,{size:"3",lineHeight:"5",children:S})]}));var G=(null===n||void 0===n?void 0:n.username)===B.username,H=null,M=null;G&&(H=Object(C.jsx)(x.a,{color:"blue",clicked:function(){return g(!0,s.k.EDIT_PRODUCT)},"data-testid":"ProductDetails-edit-button",children:"Edit offer"})),(G||(null===n||void 0===n?void 0:n.isAdmin))&&(M=Object(C.jsx)(x.a,{color:"red",clicked:function(){return g(!0,s.k.DELETE_PRODUCT)},"data-testid":"ProductDetails-delete-button",children:"Delete offer"}));var W=null;(M||H)&&(W=Object(C.jsxs)(w.a,{mgTop:"5",justify:"center",spacing:"3",children:[H,M]}));var J="not_applicable"!==y?y:"not applicable";v=Object(C.jsx)(p.a,{children:Object(C.jsxs)(b,{children:[Object(C.jsxs)(O.a,{proportion:e.width<=900?"1/1":"3/2",makeVerticalWhen:600,children:[Object(C.jsx)("section",{className:"photo-section",children:Object(C.jsx)("img",{src:z?"".concat("https://radeon2211-eshopping.herokuapp.com","/products/").concat(U,"/photo"):E.a,alt:I,className:"photo"})}),Object(C.jsxs)("section",{className:"data-section",children:[Object(C.jsx)(m.a,{variant:"h4",children:I}),Object(C.jsxs)(f.a,{size:"2",mgTop:"2",mgBottom:"2",children:[Object(C.jsx)(f.a,{color:P.a.colors.light4,children:"from\xa0"}),Object(C.jsx)(o.Link,{to:"/user/".concat(B.username,"?p=1"),"data-testid":"ProductDetails-seller-link",children:Object(C.jsx)(k.b,{children:B.username})})]}),Object(C.jsxs)(f.a,{size:"2",children:[Object(C.jsx)(f.a,{color:P.a.colors.light4,children:"Condition:"})," ".concat(J.slice(0,1).toUpperCase()).concat(J.slice(1))]}),Object(C.jsx)(f.a,{size:"6",spacing:"1px",mgTop:"3",mgBottom:"3",children:Object(N.d)(T)}),R,Object(C.jsx)(D,{productId:t,productQuantity:Q,productSellerUsername:B.username,onSetModal:g,userProfile:n})]})]}),F,W]})})}return v}}}]);