(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[3],{202:function(e,n,t){"use strict";var r=t(3),a=t(0),c=t.n(a),l=t(2),i=t(76),o=t(16);function u(){return(u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var m=c.a.createElement("path",{d:"M0 10h24v4H0z"}),f=function(e){var n=e.svgRef,t=e.title,r=s(e,["svgRef","title"]);return c.a.createElement("svg",u({viewBox:"0 0 24 24",width:24,height:24,ref:n},r),t?c.a.createElement("title",null,t):null,m)},d=c.a.forwardRef((function(e,n){return c.a.createElement(f,u({svgRef:n},e))})),p=(t.p,t(81)),h=t(48);function v(){var e=Object(r.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"]);return v=function(){return e},e}var g={};g.Wrapper=l.c.div(v(),(function(e){return e.theme.colors.light4}),(function(e){return e.theme.spacings.level2}));var b=function(e){var n=e.name,t=e.value,r=e.maxQuantity,a=e.incremented,l=e.decremented,u=e.changed,s=e.blured,m=e.focused;return c.a.createElement(g.Wrapper,null,c.a.createElement("button",{type:"button",className:"button minus",disabled:t<=1,onClick:l},c.a.createElement(o.a,{size:"small",color:t<=1?h.a.colors.light2:""},c.a.createElement(d,null))),c.a.createElement(i.a,{name:n,size:"small",value:t,changed:u,blured:s,focused:m,focusable:!1}),c.a.createElement("button",{type:"button",className:"button plus",disabled:t>=r,onClick:a},c.a.createElement(o.a,{size:"small",color:t>=r?h.a.colors.light2:""},c.a.createElement(p.a,null))))};b.defaultProps={focused:function(){}};n.a=b},204:function(e,n,t){"use strict";t.r(n);var r=t(13),a=t(0),c=t.n(a),l=t(5),i=t(12),o=t(3),u=t(2);function s(){var e=Object(o.a)(["\n  width: 100%;\n  position: sticky;\n  top: 9rem;\n\n  & > *:first-child {\n    transition: padding ","s;\n  }\n\n  &.is-sticky {\n    border-top: 1px solid ",";\n  }\n\n  @media only screen and (max-width: 75em) {\n    bottom: -1px;\n    padding-bottom: 1px;\n\n    & > *:first-child {\n      padding: ",";\n      transition: width ","s;\n    }\n  }\n"]);return s=function(){return e},e}function m(){var e=Object(o.a)(["\n  align-items: center;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-bottom: ",";\n\n  & .to-pay-text {\n    font-size: ",";\n  }\n\n  & .to-pay-value {\n    font-size: 2.6rem;\n    letter-spacing: 1px;\n    margin-left: ",";\n  }\n"]);return m=function(){return e},e}var f=u.c.div(m(),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.fontSizes.level4}),(function(e){return e.theme.spacings.level1})),d=u.c.div(s(),(function(e){return e.theme.durations.level2}),(function(e){return e.theme.colors.light3}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.durations.level2})),p=t(8),h=t(20),v=t(31),g=t(78),b=t(15),E=t(10),y=t(1);function O(){var e=Object(o.a)(["\n  padding: "," 0;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n\n  & .seller {\n    font-size: ",";\n    margin-bottom: calc(0.5 * ",");\n  }\n"]);return O=function(){return e},e}function j(){var e=Object(o.a)(["\n  min-height: 14rem;\n\n  & .clear-btn-box {\n    text-align: center;\n  }\n"]);return j=function(){return e},e}var x=u.c.div(j()),w=u.c.div(O(),(function(e){return e.theme.spacings.level3}),(function(e){return e.theme.colors.light3}),(function(e){return e.theme.fontSizes.level3}),(function(e){return e.theme.spacings.level2}));function k(){var e=Object(o.a)(["\n  align-items: center;\n  display: flex;\n  flex-wrap: wrap;\n  padding: calc(1.5 * ",") 0;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:last-child {\n    padding-bottom: calc(0.5 * ",");\n  }\n\n  & .photo-box {\n    align-items: center;\n    display: flex;\n    justify-content: center;\n    overflow: hidden;\n    max-height: 7rem;\n    width: 7rem;\n  }\n\n  & .photo {\n    max-height: 7rem;\n    max-width: 7rem;\n    object-fit: cover;\n  }\n\n  & .name {\n    font-size: ",";\n    margin-left: ",";\n    transition: color ","s;\n    width: 31rem;\n\n    &:hover {\n      color: ",";\n    }\n  }\n\n  & .mobile-lower-row {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n    flex: 1;\n  }\n\n  & .choose-quantity-box {\n    align-items: center;\n    display: flex;\n  }\n\n  & .quantity-number {\n    font-size: ",";\n    margin-left: ",";\n  }\n\n  & .price-box {\n    height: ",";\n    align-items: flex-end;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  & .overall-price {\n    font-size: 2.2rem;\n  }\n\n  & .price-per-piece {\n    font-size: ",";\n    text-align: right;\n  }\n\n  & .remove-icon {\n    cursor: pointer;\n    justify-self: right;\n    margin-left: ",";\n    padding: calc(0.5 * ",");\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .mobile-lower-row {\n      margin-top: ",";\n      min-width: 100%;\n      order: 1;\n    }\n\n    & .name {\n      width: auto;\n    }\n\n    & .remove-icon {\n      margin-left: auto;\n      padding-left: calc(\n        0.5 * "," + ","\n      );\n    }\n  }\n\n  @media only screen and (max-width: 37.5em) {\n    & .name {\n      margin-left: ",";\n    }\n  }\n"]);return k=function(){return e},e}var N=u.c.div(k(),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.colors.light2}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.fontSizes.level3}),(function(e){return e.theme.spacings.level3}),(function(e){return e.theme.durations.level1}),(function(e){return e.theme.colors.green}),(function(e){return e.theme.fontSizes.level2}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level4}),(function(e){return e.theme.fontSizes.level2}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level2})),z=t(202),C=t(14),R=t(82),L=t.n(R),S=t(4),q=t(103),M=t(16);function P(){return(P=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function I(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var _=c.a.createElement("path",{d:"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"}),B=function(e){var n=e.svgRef,t=e.title,r=I(e,["svgRef","title"]);return c.a.createElement("svg",P({width:24,height:24,viewBox:"0 0 24 24",ref:n},r),t?c.a.createElement("title",null,t):null,_)},T=c.a.forwardRef((function(e,n){return c.a.createElement(B,P({svgRef:n},e))})),U=(t.p,t(48)),W=function(e){var n=e.data,t=e.isCartLoading,o=n._id,u=n.quantity,s=n.product,m=s._id,f=s.name,d=s.price,h=s.photo,v=s.quantity,g=Object(a.useState)(u),b=Object(r.a)(g,2),E=b[0],O=b[1],j=Object(a.useState)(!1),x=Object(r.a)(j,2),w=x[0],k=x[1],R=Object(l.b)(),P=Object(a.useCallback)((function(e,n,t){return R(p.y(e,n,t))}),[R]),I=Object(a.useCallback)((function(e){return R(p.w(e))}),[R]);Object(a.useEffect)((function(){O((function(e){return e===u||t||w?e:u}))}),[u,E,O,w,t]);return c.a.createElement(N,null,c.a.createElement(i.Link,{to:"/products/".concat(m),"data-test":"product-link"},c.a.createElement("div",{className:"photo-box"},c.a.createElement("img",{src:h?"".concat(C.a,"/products/").concat(m,"/photo"):L.a,alt:"product",className:"photo"}))),c.a.createElement("span",{className:"name"},c.a.createElement(i.Link,{to:"/products/".concat(m),"data-test":"product-link"},f)),c.a.createElement("div",{className:"mobile-lower-row"},c.a.createElement("div",{className:"choose-quantity-box"},c.a.createElement(z.a,{maxQuantity:v,value:E,incremented:function(){O((function(e){return e<v?e+1:e})),P(o,y.m.INCREMENT)},decremented:function(){O((function(e){return e>0?e-1:e})),P(o,y.m.DECREMENT)},name:"quantity",changed:function(e){var n=+e.target.value||"";n||O(n),n<1||n>v||O(n)},blured:function(e){var n=+e.target.value;!n||n<1?(O(1),P(o,y.m.NUMBER,1)):n>v?(O(v),P(o,y.m.NUMBER,v)):P(o,y.m.NUMBER,n),k(!1)},focused:function(){return k(!0)}}),c.a.createElement("span",{className:"quantity-number"},"of ".concat(v))),c.a.createElement("div",{className:"price-box"},c.a.createElement("span",{className:"overall-price"},Object(S.c)(d*u)),u>1&&c.a.createElement(q.a,{className:"price-per-piece"},"per piece ".concat(Object(S.c)(d))))),c.a.createElement(M.a,{size:"medium",color:U.a.colors.red,onClick:function(){return I(o)},className:"remove-icon"},c.a.createElement(T,null)))},Y=function(e){var n=e.cart,t=e.isCartLoading,o=Object(l.b)(),u=Object(a.useCallback)((function(e,n){return o(p.x(e,n))}),[o]),s=n.reduce((function(e,n){return e[n.product.seller._id]||(e[n.product.seller._id]={items:[],sellerUsername:n.product.seller.username}),e[n.product.seller._id].items.push(n),e}),{}),m=Object.entries(s).map((function(e){var n=Object(r.a)(e,2),t=n[0],a=n[1];return Object(E.a)({sellerId:t},a)})).map((function(e){var n=e.sellerId,r=e.sellerUsername,a=e.items;return c.a.createElement(w,{key:n},c.a.createElement("div",{className:"seller"},c.a.createElement("span",null,"seller "),c.a.createElement(i.Link,{to:"/users/".concat(n)},c.a.createElement(q.b,null,r))),a.map((function(e){return c.a.createElement(W,{key:e._id,data:e,isCartLoading:t})})))}));return c.a.createElement(x,null,c.a.createElement("div",{className:"clear-btn-box"},c.a.createElement(b.a,{color:"red",clicked:function(){return u(!0,y.g.CLEAR_CART)}},"clear the cart")),m)},A=t(58);n.default=function(){var e=Object(a.useRef)(null),n=Object(l.c)((function(e){return e.ui.isCartLoading})),t=Object(l.c)((function(e){return e.auth.cart})),o=Object(l.b)(),u=Object(a.useCallback)((function(){return o(p.p())}),[o]);Object(a.useEffect)((function(){new IntersectionObserver((function(e){var n=Object(r.a)(e,1)[0];return n.target.classList.toggle("is-sticky",n.intersectionRatio<1)}),{threshold:[1]}).observe(e.current),u()}),[u]);var s=c.a.createElement(A.a,null);if(null===t)s=c.a.createElement(h.a,{variant:"h3",align:"center","data-test":"cart-error-heading"},"There is a problem to get your shopping cart");else if(t)if(t.length>0){var m=t.reduce((function(e,n){var t=n.product,r=n.quantity;return e+t.price*r}),0),E=Math.round(100*(m+Number.EPSILON))/100;s=c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{variant:"h3"},"Your shopping cart"),c.a.createElement(v.a,{proportion:"3/1",makeVerticalWhen:1200},c.a.createElement(g.a,null,c.a.createElement(Y,{cart:t,isCartLoading:n})),c.a.createElement(d,{ref:e},c.a.createElement(g.a,null,c.a.createElement(f,null,c.a.createElement("span",{className:"to-pay-text"},"To pay"),c.a.createElement("span",{className:"to-pay-value"},Object(S.c)(E))),c.a.createElement(b.a,{filled:!0,isLoading:n,stretch:!0},"go to summary")))))}else s=c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{variant:"h3",mgBottom:"level3",align:"center",lineHeight:"medium","data-test":"cart-empty-heading"},"Your shopping cart is empty. Check out the latest\xa0",c.a.createElement(i.Link,{to:y.a},c.a.createElement(q.b,null,"offers"))),c.a.createElement(h.a,{variant:"h4",align:"center","data-test":"cart-info-heading"},"You can have up to 50 products in the cart"));return s}}}]);