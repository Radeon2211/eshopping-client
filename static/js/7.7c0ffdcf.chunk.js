(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[7],{360:function(t,e,n){"use strict";var c,i=n(9),r=n(0),a=n(8),o=n(65),s=n(24);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var n,c,i=function(t,e){if(null==t)return{};var n,c,i={},r=Object.keys(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t,e){var n=t.title,i=t.titleId,a=u(t,["title","titleId"]);return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:e,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,c||(c=r.createElement("path",{d:"M0 10h24v4H0z"})))}var h,j=r.forwardRef(d),b=(n.p,n(70)),p=n(22),f=n(1),m={};m.Wrapper=a.c.div(h||(h=Object(i.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"])),(function(t){return t.theme.colors.light4}),(function(t){return t.theme.spacings.level2}));var O=function(t){var e=t.name,n=t.value,c=t.maxQuantity,i=t.incremented,r=t.decremented,a=t.changed,l=t.blured,u=t.focused;return Object(f.jsxs)(m.Wrapper,{children:[Object(f.jsx)("button",{type:"button",className:"button minus",disabled:n<=1,onClick:r,"data-testid":"ChooseQuantity-minus-btn","aria-label":"Decrease product quantity",children:Object(f.jsx)(s.a,{size:"small",color:n<=1?p.a.colors.light2:"","data-testid":"ChooseQuantity-minus-icon",children:Object(f.jsx)(j,{})})}),Object(f.jsx)(o.a,{name:e,size:"small",value:n,changed:a,blured:l,focused:u}),Object(f.jsx)("button",{type:"button",className:"button plus",disabled:n>=c,onClick:i,"data-testid":"ChooseQuantity-plus-btn","aria-label":"Increase product quantity",children:Object(f.jsx)(s.a,{size:"small",color:n>=c?p.a.colors.light2:"","data-testid":"ChooseQuantity-plus-icon",children:Object(f.jsx)(b.a,{})})})]})};O.defaultProps={focused:function(){}};e.a=O},368:function(t,e,n){"use strict";n.r(e);var c,i,r=n(0),a=n(26),o=n(16),s=n(6),l=n(10),u=n(9),d=n(8),h=d.c.div(c||(c=Object(u.a)(["\n  & .photo-section {\n    align-items: center;\n    display: flex;\n    height: 45rem;\n    justify-content: center;\n    margin-right: ",";\n    padding: "," ",";\n    width: 100%;\n  }\n\n  & .photo {\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  & .data-section {\n    align-self: stretch;\n    display: flex;\n    flex-direction: column;\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .photo-section {\n      margin-right: ",";\n    }\n  }\n"])),(function(t){return t.theme.spacings.level5}),(function(t){return t.theme.spacings.level1}),(function(t){return t.theme.spacings.level2}),(function(t){return t.theme.spacings.level3})),j=n(51),b=n(68),p=n(12),f=n(25),m=n(29),O=n(15),g=d.c.div(i||(i=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n\n  & > button:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(t){return t.theme.spacings.level2})),x=n(2),v=n(17),y=n(360),P=n(56),k=n(22),E=n(21),S=n(1),w=function(t){var e=t.productId,n=t.productQuantity,c=t.productSellerUsername,i=t.onSetModal,u=t.userProfile,d=Object(a.k)(),h=Object(r.useState)(1),j=Object(O.a)(h,2),b=j[0],m=j[1],w=Object(s.c)((function(t){return t.auth.cart})),C=Object(s.c)((function(t){return t.ui.isCartLoading})),D=Object(s.b)(),I=Object(r.useCallback)((function(t){return D(l.b(t))}),[D]),N=Object(r.useCallback)((function(t,e){return D(l.s(t,e))}),[D]),q=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(p.a,{size:"2",children:"Quantity: ".concat(n)}),Object(S.jsx)(f.a,{variant:"h4",mgTop:"3",children:"You are the seller of this product"})]});if((null===u||void 0===u?void 0:u.username)!==c){var T,z=null;w&&(z=w.find((function(t){return t.product._id===e})));var L=Object(S.jsx)(v.a,{filled:!0,stretch:!0,clicked:function(){u?"active"!==(null===u||void 0===u?void 0:u.status)?i(x.m.PENDING_USER_INFO):I({quantity:b,product:e}):i(x.m.LOGIN)},isLoading:C,children:"add to cart"});(null===(T=z)||void 0===T?void 0:T.quantity)>=n&&(L=Object(S.jsxs)(f.a,{variant:"h4",align:"center",mgBottom:"2","data-testid":"PurchaseSection-not-able-to-add",children:["You have added all pieces to\xa0",Object(S.jsx)(o.Link,{to:"/cart",children:Object(S.jsx)(P.a,{children:"cart"})})]})),q=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(E.a,{align:"center",mgBottom:"3","data-testid":"PurchaseSection-choose-quantity-wrapper",children:[Object(S.jsx)(y.a,{name:"quantity",maxQuantity:n,value:b,incremented:function(){b<n&&m((function(t){return t+1}))},decremented:function(){b>1&&m((function(t){return t-1}))},changed:function(t){var e=+t.target.value||"";e&&(e<1||e>n)||m(e)},blured:function(t){var e=+t.target.value;m(!e||e<1?1:e>n?n:e)}}),Object(S.jsxs)(p.a,{size:"2",mgLeft:"1","data-testid":"PurchaseSection-product-quantity",children:["of ".concat(n," piece").concat(n>1?"s":""),z&&Object(S.jsxs)(p.a,{color:k.a.colors.light4,"data-testid":"PurchaseSection-quantity-in-cart",children:["\xa0","(".concat(z.quantity," in cart)")]})]})]}),L,Object(S.jsx)(v.a,{filled:!0,stretch:!0,clicked:function(){u?"active"!==(null===u||void 0===u?void 0:u.status)?i(x.m.PENDING_USER_INFO):N(d,{product:e,quantity:b}):i(x.m.LOGIN)},isLoading:C,children:"buy now"})]})}return Object(S.jsx)(g,{children:q})};w.defaultProps={productSellerUsername:void 0,userProfile:null};var C=w,D=n(102),I=n(4),N=n(81),q=n(109);e.default=function(){var t=Object(a.m)().id,e=Object(N.a)(),n=Object(s.c)((function(t){return t.auth.profile})),c=Object(s.c)((function(t){return t.product.productDetails})),i=Object(s.b)(),u=Object(r.useCallback)((function(t){return i(l.p(t))}),[i]),d=Object(r.useCallback)((function(){return i(l.E())}),[i]),O=Object(r.useCallback)((function(t){return i(l.B(t))}),[i]);Object(r.useEffect)((function(){return u(t),Object(I.k)(),function(){return d()}}),[t,u,d]);var g="Offer is loading... - E-Shopping",y=Object(S.jsx)(j.a,{align:"center"});if(null===c)g="Offer does not exist - E-Shopping",y=Object(S.jsx)(f.a,{variant:"h4",align:"center",lineHeight:"4",children:"Such product does not exist or has already been sold"});else if(c){var w=c.condition,T=c.description,z=c.name,L=c.photo,Q=c.price,B=c.quantity,_=c.quantitySold,U=c.buyerQuantity,F=c.seller,R=c._id;g="".concat(z," - E-Shopping");var G=null;_>=1&&(G=Object(S.jsxs)(p.a,{size:"2",mgBottom:"3",color:k.a.colors.light4,"data-testid":"ProductDetails-quantity-sold",children:[1===U?"1 person":"".concat(U," people")," bought ",_," ",1===_?"unit":"units"]}));var A=Object(S.jsx)(f.a,{variant:"h4",mgTop:"3","data-testid":"ProductDetails-no-description",children:"This product has no description"});T&&(A=Object(S.jsxs)("section",{"data-testid":"ProductDetails-full-description",children:[Object(S.jsx)(f.a,{variant:"h4",mgBottom:"2",mgTop:"3",children:"Description"}),Object(S.jsx)(p.a,{size:"3",lineHeight:"5",children:T})]}));var H=(null===n||void 0===n?void 0:n.username)===F.username,M=null,W=null;H&&(M=Object(S.jsx)(v.a,{color:"blue",clicked:function(){return O(x.m.EDIT_PRODUCT)},"data-testid":"ProductDetails-edit-button",children:"Edit offer"})),(H||(null===n||void 0===n?void 0:n.isAdmin))&&(W=Object(S.jsx)(v.a,{color:"red",clicked:function(){return O(x.m.DELETE_PRODUCT)},"data-testid":"ProductDetails-delete-button",children:"Delete offer"}));var J=null;(W||M)&&(J=Object(S.jsxs)(E.a,{mgTop:"5",justify:"center",spacing:"3",children:[M,W]}));var Y=w!==x.o.NOT_APPLICABLE?w:"not applicable";y=Object(S.jsx)(b.a,{children:Object(S.jsxs)(h,{children:[Object(S.jsxs)(m.a,{proportion:e.width<=900?"1/1":"3/2",makeVerticalWhen:600,children:[Object(S.jsx)("section",{className:"photo-section",children:Object(S.jsx)("img",{src:L?"".concat("https://radeon2211-eshopping.herokuapp.com","/products/").concat(R,"/photo"):D.a,alt:z,className:"photo"})}),Object(S.jsxs)("section",{className:"data-section",children:[Object(S.jsx)(f.a,{variant:"h4",children:z}),Object(S.jsxs)(p.a,{size:"2",mgTop:"2",mgBottom:"2",children:[Object(S.jsx)(p.a,{color:k.a.colors.light4,children:"from\xa0"}),Object(S.jsx)(o.Link,{to:"/user/".concat(F.username,"?p=1"),"data-testid":"ProductDetails-seller-link",children:Object(S.jsx)(P.a,{children:F.username})})]}),Object(S.jsxs)(p.a,{size:"2",children:[Object(S.jsx)(p.a,{color:k.a.colors.light4,children:"Condition:"})," ".concat(Y.slice(0,1).toUpperCase()).concat(Y.slice(1))]}),Object(S.jsx)(p.a,{size:"6",spacing:"1px",mgTop:"3",mgBottom:"3",children:Object(I.d)(Q)}),G,Object(S.jsx)(C,{productId:t,productQuantity:B,productSellerUsername:F.username,onSetModal:O,userProfile:n})]})]}),A,J]})})}return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(q.a,{title:g,description:"Check out details about this products"}),y]})}}}]);