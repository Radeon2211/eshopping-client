(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[7],{229:function(e,t,n){"use strict";var a=n(6),r=n(0),c=n.n(r),o=n(5),i=n(79),l=n(20);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=c.a.createElement("path",{d:"M0 10h24v4H0z"}),m=function(e){var t=e.svgRef,n=e.title,a=s(e,["svgRef","title"]);return c.a.createElement("svg",u({viewBox:"0 0 24 24",width:24,height:24,ref:t},a),n?c.a.createElement("title",null,n):null,d)},p=c.a.forwardRef((function(e,t){return c.a.createElement(m,u({svgRef:t},e))})),f=(n.p,n(83)),h=n(19);function b(){var e=Object(a.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"]);return b=function(){return e},e}var g={};g.Wrapper=o.c.div(b(),(function(e){return e.theme.colors.light4}),(function(e){return e.theme.spacings.level2}));var v=function(e){var t=e.name,n=e.value,a=e.maxQuantity,r=e.incremented,o=e.decremented,u=e.changed,s=e.blured,d=e.focused;return c.a.createElement(g.Wrapper,null,c.a.createElement("button",{type:"button",className:"button minus",disabled:n<=1,onClick:o,"data-testid":"ChooseQuantity-minus-btn"},c.a.createElement(l.a,{size:"small",color:n<=1?h.a.colors.light2:"","data-testid":"ChooseQuantity-minus-icon"},c.a.createElement(p,null))),c.a.createElement(i.a,{name:t,size:"small",value:n,changed:u,blured:s,focused:d}),c.a.createElement("button",{type:"button",className:"button plus",disabled:n>=a,onClick:r,"data-testid":"ChooseQuantity-plus-btn"},c.a.createElement(l.a,{size:"small",color:n>=a?h.a.colors.light2:"","data-testid":"ChooseQuantity-plus-icon"},c.a.createElement(f.a,null))))};v.defaultProps={focused:function(){}};t.a=v},236:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n(4),i=n(1),l=n(7),u=n(6),s=n(5);function d(){var e=Object(u.a)(["\n  & .photo-section {\n    align-items: center;\n    display: flex;\n    height: 45rem;\n    justify-content: center;\n    margin-right: ",";\n    padding: "," ",";\n    width: 100%;\n  }\n\n  & .photo {\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  & .data-section {\n    align-self: stretch;\n    display: flex;\n    flex-direction: column;\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .photo-section {\n      margin-right: ",";\n    }\n  }\n"]);return d=function(){return e},e}var m=s.c.div(d(),(function(e){return e.theme.spacings.level5}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.spacings.level3})),p=n(60),f=n(81),h=n(9),b=n(21),g=n(30),v=n(13),E=n(26);function y(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n\n  & > button:not(:last-child) {\n    margin-bottom: ",";\n  }\n"]);return y=function(){return e},e}var O=s.c.div(y(),(function(e){return e.theme.spacings.level2})),j=n(15),k=n(229),P=n(52),x=n(19),C=n(22),S=function(e){var t=e.productId,n=e.productQuantity,u=e.productSellerUsername,s=e.onSetModal,d=e.userProfile,m=Object(E.k)(),p=Object(a.useState)(1),f=Object(v.a)(p,2),g=f[0],y=f[1],S=Object(o.c)((function(e){return e.auth.cart})),D=Object(o.c)((function(e){return e.ui.isCartLoading})),w=Object(o.b)(),N=Object(a.useCallback)((function(e){return w(l.b(e))}),[w]),q=Object(a.useCallback)((function(e,t){return w(l.t(e,t))}),[w]),z=r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{size:"2"},"Quantity: ".concat(n)),r.a.createElement(b.a,{variant:"h4",mgTop:"3"},"You are the seller of this product"));if((null===d||void 0===d?void 0:d.username)!==u){var T,I=null;S&&(I=S.find((function(e){return e.product._id===t})));var Q=r.a.createElement(j.a,{filled:!0,stretch:!0,clicked:function(){d?"active"!==(null===d||void 0===d?void 0:d.status)?s(!0,i.k.PENDING_USER_INFO):N({quantity:g,product:t}):s(!0,i.k.LOGIN)},isLoading:D},"add to cart");(null===(T=I)||void 0===T?void 0:T.quantity)>=n&&(Q=r.a.createElement(b.a,{variant:"h4",align:"center",mgBottom:"2","data-testid":"PurchaseSection-not-able-to-add"},"You have added all pieces to\xa0",r.a.createElement(c.Link,{to:"/cart"},r.a.createElement(P.b,null,"cart")))),z=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{align:"center",mgBottom:"3","data-testid":"PurchaseSection-choose-quantity-wrapper"},r.a.createElement(k.a,{name:"quantity",maxQuantity:n,value:g,incremented:function(){g<n&&y((function(e){return e+1}))},decremented:function(){g>1&&y((function(e){return e-1}))},changed:function(e){var t=+e.target.value||"";t&&(t<1||t>n)||y(t)},blured:function(e){var t=+e.target.value;y(!t||t<1?1:t>n?n:t)}}),r.a.createElement(h.a,{size:"2",mgLeft:"1","data-testid":"PurchaseSection-product-quantity"},"of ".concat(n," piece").concat(n>1?"s":""),I&&r.a.createElement(h.a,{color:x.a.colors.light4,"data-testid":"PurchaseSection-quantity-in-cart"},"\xa0","(".concat(I.quantity," in cart)")))),Q,r.a.createElement(j.a,{filled:!0,stretch:!0,clicked:function(){d?"active"!==(null===d||void 0===d?void 0:d.status)?s(!0,i.k.PENDING_USER_INFO):q(m,{product:t,quantity:g}):s(!0,i.k.LOGIN)},isLoading:D},"buy now"))}return r.a.createElement(O,null,z)};S.defaultProps={productSellerUsername:void 0,userProfile:null};var D=S,w=n(112),N=n.n(w),q=n(2),z=n(88);t.default=function(e){var t=e.match.params.id,n=Object(z.a)(),u=Object(o.c)((function(e){return e.auth.profile})),s=Object(o.c)((function(e){return e.product.productDetails})),d=Object(o.b)(),v=Object(a.useCallback)((function(e){return d(l.q(e))}),[d]),E=Object(a.useCallback)((function(){return d(l.E())}),[d]),y=Object(a.useCallback)((function(e,t){return d(l.B(e,t))}),[d]);Object(a.useEffect)((function(){return v(t),function(){return E()}}),[t,v,E]);var O=r.a.createElement(p.a,{align:"center"});if(null===s)O=r.a.createElement(b.a,{variant:"h4",align:"center",lineHeight:"4"},"Such product does not exist or has already been sold");else if(s){var k=s.condition,S=s.description,w=s.name,T=s.photo,I=s.price,Q=s.quantity,L=s.quantitySold,_=s.buyerQuantity,B=s.seller,R=s._id,U=null;L>=1&&(U=r.a.createElement(h.a,{size:"2",mgBottom:"3",color:x.a.colors.light4,"data-testid":"ProductDetails-quantity-sold"},1===_?"1 person":"".concat(_," people")," bought ",L," ",1===L?"unit":"units"));var F=r.a.createElement(b.a,{variant:"h4",mgTop:"3","data-testid":"ProductDetails-no-description"},"This product has no description");S&&(F=r.a.createElement("section",{"data-testid":"ProductDetails-full-description"},r.a.createElement(b.a,{variant:"h4",mgBottom:"2",mgTop:"3"},"Description"),r.a.createElement(h.a,{size:"3",lineHeight:"5"},S)));var G=(null===u||void 0===u?void 0:u.username)===B.username,H=null,M=null;G&&(H=r.a.createElement(j.a,{color:"blue",clicked:function(){return y(!0,i.k.EDIT_PRODUCT)},"data-testid":"ProductDetails-edit-button"},"Edit offer")),(G||(null===u||void 0===u?void 0:u.isAdmin))&&(M=r.a.createElement(j.a,{color:"red",clicked:function(){return y(!0,i.k.DELETE_PRODUCT)},"data-testid":"ProductDetails-delete-button"},"Delete offer"));var W=null;(M||H)&&(W=r.a.createElement(C.a,{mgTop:"5",justify:"center",spacing:"3"},H,M));var J="not_applicable"!==k?k:"not applicable";O=r.a.createElement(f.a,null,r.a.createElement(m,null,r.a.createElement(g.a,{proportion:n.width<=900?"1/1":"3/2",makeVerticalWhen:600},r.a.createElement("section",{className:"photo-section"},r.a.createElement("img",{src:T?"".concat("https://radeon2211-eshopping.herokuapp.com","/products/").concat(R,"/photo"):N.a,alt:w,className:"photo"})),r.a.createElement("section",{className:"data-section"},r.a.createElement(b.a,{variant:"h4"},w),r.a.createElement(h.a,{size:"2",mgTop:"2",mgBottom:"2"},r.a.createElement(h.a,{color:x.a.colors.light4},"from\xa0"),r.a.createElement(c.Link,{to:"/user/".concat(B.username,"?p=1"),"data-testid":"ProductDetails-seller-link"},r.a.createElement(P.b,null,B.username))),r.a.createElement(h.a,{size:"2"},r.a.createElement(h.a,{color:x.a.colors.light4},"Condition:")," ".concat(J.slice(0,1).toUpperCase()).concat(J.slice(1))),r.a.createElement(h.a,{size:"6",spacing:"1px",mgTop:"3",mgBottom:"3"},Object(q.d)(I)),U,r.a.createElement(D,{productId:t,productQuantity:Q,productSellerUsername:B.username,onSetModal:y,userProfile:u}))),F,W))}return O}}}]);