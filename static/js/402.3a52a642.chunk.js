"use strict";(self.webpackChunkeshopping_app_client=self.webpackChunkeshopping_app_client||[]).push([[402],{4145:(e,n,t)=>{t.d(n,{Z:()=>N});var r,i=t(168),s=t(2791),a=t(2007),l=t.n(a),c=t(545),o=t(9741),d=t(6715),u=t(9434),h=t(134);const m=c.ZP.div(r||(r=(0,i.Z)(["\n  align-items: center;\n  display: flex;\n  flex-wrap: wrap;\n  padding: calc(1.5 * ",") 0;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n\n  & .photo-and-name {\n    align-items: center;\n    display: flex;\n  }\n\n  & .name {\n    font-size: ",";\n    margin-left: ",";\n    width: 31rem;\n\n    & > a {\n      transition: color ","s;\n\n      &:hover {\n        color: ",";\n      }\n    }\n  }\n\n  & .mobile-lower-row {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n    flex: 1;\n  }\n\n  & .choose-quantity-box {\n    align-items: center;\n    display: flex;\n  }\n\n  & .price-box {\n    align-items: flex-end;\n    display: flex;\n    flex-direction: column;\n    height: ",";\n    justify-content: center;\n  }\n\n  & .remove-icon {\n    cursor: pointer;\n    justify-self: right;\n    margin-left: ",";\n    padding: calc(0.5 * ",");\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .mobile-lower-row {\n      margin-top: ",";\n      min-width: 100%;\n      order: 1;\n    }\n\n    & .name {\n      width: auto;\n    }\n\n    & .remove-icon {\n      margin-left: auto;\n      padding-left: calc(\n        0.5 * "," + ","\n      );\n    }\n  }\n\n  @media only screen and (max-width: 37.5em) {\n    & .name {\n      margin-left: ",";\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.spacings.level2}),(e=>{let{theme:n}=e;return n.colors.light2}),(e=>{let{theme:n}=e;return n.fontSizes.level3}),(e=>{let{theme:n}=e;return n.spacings.level3}),(e=>{let{theme:n}=e;return n.durations.level1}),(e=>{let{theme:n}=e;return n.colors.green}),(e=>{let{theme:n}=e;return n.spacings.level4}),(e=>{let{theme:n}=e;return n.spacings.level2}),(e=>{let{theme:n}=e;return n.spacings.level1}),(e=>{let{theme:n}=e;return n.spacings.level2}),(e=>{let{theme:n}=e;return n.spacings.level1}),(e=>{let{theme:n}=e;return n.spacings.level1}),(e=>{let{theme:n}=e;return n.spacings.level2}));var p,g=t(3963),x=t(6054),f=t(478),v=t(3090),j=t(3330);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},b.apply(this,arguments)}function y(e,n){let{title:t,titleId:r,...i}=e;return s.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:n,"aria-labelledby":r},i),t?s.createElement("title",{id:r},t):null,p||(p=s.createElement("path",{d:"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"})))}const Z=s.forwardRef(y);t.p;var w=t(5914),C=t(7662),I=t(9776),T=t(184);function k(e){let{data:n,isCartLoading:t}=e;const{_id:r,quantity:i,product:{_id:a,name:l,price:c,photo:d,quantity:p}}=n,[b,y]=(0,s.useState)(i),[I,k]=(0,s.useState)(!1),R=(0,u.I0)(),z=(0,s.useCallback)(((e,n,t)=>R(h.bd(e,n,t))),[R]),E=(0,s.useCallback)((e=>R(h.B8(e))),[R]);(0,s.useEffect)((()=>{y((e=>e===i||t||I?e:i))}),[i,b,y,I,t]);return(0,T.jsxs)(m,{"data-testid":"CartItem",children:[(0,T.jsxs)("div",{className:"photo-and-name",children:[(0,T.jsx)(o.rU,{to:"/product/".concat(a),"data-testid":"CartItem-product-link-photo",children:(0,T.jsx)(C.Z,{photo:d,alt:l,productId:a,width:"7",height:"7"})}),(0,T.jsx)("span",{className:"name",children:(0,T.jsx)(o.rU,{to:"/product/".concat(a),"data-testid":"CartItem-product-link-name",children:l})})]}),(0,T.jsxs)("div",{className:"mobile-lower-row",children:[(0,T.jsxs)("div",{className:"choose-quantity-box",children:[(0,T.jsx)(g.Z,{maxQuantity:p,value:b,incremented:()=>{y((e=>e<p?e+1:e)),z(r,x.fL.INCREMENT)},decremented:()=>{y((e=>e>0?e-1:e)),z(r,x.fL.DECREMENT)},name:"quantity",changed:e=>{const n=+e.target.value||"";n||y(n),n<1||n>p||y(n)},blured:e=>{const n=+e.target.value;!n||n<1?(y(1),z(r,x.fL.NUMBER,1)):n>p?(y(p),z(r,x.fL.NUMBER,p)):n!==i&&z(r,x.fL.NUMBER,n),k(!1)},focused:()=>k(!0)}),(0,T.jsx)(j.Z,{size:"2",mgLeft:"1","data-testid":"CartItem-available-quantity",children:"of ".concat(p)})]}),(0,T.jsxs)("div",{className:"price-box",children:[(0,T.jsx)(j.Z,{size:"5","data-testid":"CartItem-total-price",children:(0,f.T4)(c*i)}),i>1&&(0,T.jsx)(j.Z,{size:"2",textAlign:"right","data-testid":"CartItem-price-per-piece",children:"per piece ".concat((0,f.T4)(c))})]})]}),(0,T.jsx)(v.Z,{size:"medium",color:w.Z.colors.red,onClick:()=>E(r),className:"remove-icon","data-testid":"CartItem-trash-icon",children:(0,T.jsx)(Z,{})})]})}var R,z=t(593);const E={};function N(e){let{items:n,type:t,isCartLoading:r}=e;const i=n.reduce(((e,n)=>{const r=t===x.cs.CART?n.product.seller.username:n.seller.username;return e[r]||(e[r]={items:[],sellerUsername:r}),e[r].items.push(n),e}),{});return Object.entries(i).map((e=>{let[n,t]=e;return{sellerUsername:n,...t}})).map((e=>{let{sellerUsername:n,items:i}=e;return(0,T.jsxs)(E.SingleSeller,{"data-testid":"CartAndTransactionItems-item",children:[(0,T.jsxs)(j.Z,{size:"3",display:"block",children:[(0,T.jsx)("span",{children:"seller "}),(0,T.jsx)(o.rU,{to:"/user/".concat(n,"?p=1"),"data-testid":"CartAndTransactionItems-item-seller-link",children:(0,T.jsx)(z._,{children:n})})]}),t===x.cs.CART?i.map((e=>(0,T.jsx)(k,{data:e,isCartLoading:r},e._id))):i.map((e=>(0,T.jsx)(d.Z,{data:e},e._id)))]},n)}))}E.SingleSeller=c.ZP.div(R||(R=(0,i.Z)(["\n  padding: "," 0;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n"])),(e=>{let{theme:n}=e;return n.spacings.level3}),(e=>{let{theme:n}=e;return n.colors.light3})),N.defaultProps={isCartLoading:void 0},N.propTypes={items:l().oneOfType([l().arrayOf(l().shape(I.sY).isRequired),l().arrayOf(l().shape({_id:l().string.isRequired,name:l().string.isRequired,price:l().number.isRequired,quantity:l().number.isRequired,photo:l().bool.isRequired,seller:l().shape({username:l().string.isRequired}).isRequired}))]),type:l().oneOf([x.cs.TRANSACTION,x.cs.CART]).isRequired,isCartLoading:l().bool}},6715:(e,n,t)=>{t.d(n,{Z:()=>b});var r,i,s,a=t(2791),l=t(9741),c=t(168),o=t(545),d=t(2268);const u=(0,o.ZP)(d.Z)(r||(r=(0,c.Z)(["\n  padding-top: ",";\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n"])),(e=>{let{theme:n}=e;return n.spacings.level3})),h=o.ZP.div(i||(i=(0,c.Z)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n\n  & > *:not(:last-child) {\n    margin-right: ",";\n  }\n\n  & .name {\n    flex: 2;\n    font-size: ",";\n\n    & > a {\n      transition: color ","s;\n\n      &:hover {\n        color: ",";\n      }\n    }\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    align-items: start;\n    flex-direction: column;\n    justify-content: center;\n\n    & > *:not(:last-child) {\n      margin-right: 0;\n      margin-bottom: ",";\n    }\n\n    & .name {\n      flex: initial;\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.spacings.level1}),(e=>{let{theme:n}=e;return n.fontSizes.level3}),(e=>{let{theme:n}=e;return n.durations.level1}),(e=>{let{theme:n}=e;return n.colors.green}),(e=>{let{theme:n}=e;return n.spacings.level1})),m=(0,o.ZP)(d.Z)(s||(s=(0,c.Z)(["\n  @media only screen and (max-width: 56.25em) {\n    flex: initial;\n  }\n"])));var p=t(5914),g=t(7662),x=t(3330),f=t(478),v=t(184);const j=a.memo((e=>{let{data:n,orderId:t}=e;const{_id:r,name:i,price:s,quantity:a,photo:c}=n,o=(0,f.t$)(s*a);return(0,v.jsxs)(u,{spacing:"2","data-testid":"TransactionAndOrderProdItem",children:[(0,v.jsx)(l.rU,{to:"/product/".concat(r),"data-testid":"TransactionAndOrderProdItem-product-link-photo",children:(0,v.jsx)(g.Z,{photo:c,alt:i,productId:r,width:"5",height:"5",orderId:t})}),(0,v.jsxs)(h,{children:[(0,v.jsx)("span",{className:"name",children:(0,v.jsx)(l.rU,{to:"/product/".concat(r),"data-testid":"TransactionAndOrderProdItem-product-link-name",children:i})}),(0,v.jsxs)(m,{justify:"space-between",align:"center",flex:"1",children:[(0,v.jsx)(x.Z,{size:"2",color:p.Z.colors.light4,"data-testid":"TransactionAndOrderProdItem-product-price-per-piece",children:"".concat(a," x ").concat((0,f.T4)(s))}),(0,v.jsx)(x.Z,{size:"4","data-testid":"TransactionAndOrderProdItem-product-overall-price",children:(0,f.T4)(o)})]})]})]})}));j.defaultProps={orderId:""};const b=j},3963:(e,n,t)=>{t.d(n,{Z:()=>f});var r,i=t(168),s=t(2791),a=t(545),l=t(1132),c=t(3090);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function d(e,n){let{title:t,titleId:i,...a}=e;return s.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:n,"aria-labelledby":i},a),t?s.createElement("title",{id:i},t):null,r||(r=s.createElement("path",{d:"M0 10h24v4H0z"})))}const u=s.forwardRef(d);t.p;var h,m=t(571),p=t(5914),g=t(184);const x={};function f(e){const{name:n,value:t,maxQuantity:r,incremented:i,decremented:s,changed:a,blured:o,focused:d}=e;return(0,g.jsxs)(x.Wrapper,{children:[(0,g.jsx)("button",{type:"button",className:"button minus",disabled:t<=1,onClick:s,"data-testid":"ChooseQuantity-minus-btn","aria-label":"Decrease product quantity",children:(0,g.jsx)(c.Z,{size:"small",color:t<=1?p.Z.colors.light2:"","data-testid":"ChooseQuantity-minus-icon",children:(0,g.jsx)(u,{})})}),(0,g.jsx)(l.Z,{name:n,size:"small",value:t,changed:a,blured:o,focused:d}),(0,g.jsx)("button",{type:"button",className:"button plus",disabled:t>=r,onClick:i,"data-testid":"ChooseQuantity-plus-btn","aria-label":"Increase product quantity",children:(0,g.jsx)(c.Z,{size:"small",color:t>=r?p.Z.colors.light2:"","data-testid":"ChooseQuantity-plus-icon",children:(0,g.jsx)(m.r,{})})})]})}x.Wrapper=a.ZP.div(h||(h=(0,i.Z)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.light4}),(e=>{let{theme:n}=e;return n.spacings.level2})),f.defaultProps={focused:()=>{}}},1936:(e,n,t)=>{t.d(n,{Z:()=>a});t(2791);var r=t(2268),i=t(3330),s=(t(9776),t(184));function a(e){let{data:n}=e;const{firstName:t,lastName:a,street:l,zipCode:c,city:o,country:d,phone:u}=n,h=["".concat(t," ").concat(a),l,"".concat(c," ").concat(o),d,u];return(0,s.jsx)(r.Z,{direction:"column",spacing:"1",children:h.map(((e,n)=>(0,s.jsx)(i.Z,{size:"3",wordBreak:"break-all",children:e},n)))})}},7252:(e,n,t)=>{t.d(n,{Z:()=>d});var r,i=t(168),s=t(2791),a=t(545),l=t(2626),c=t(184);const o={};function d(e){let{children:n}=e;const t=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(t.current){new IntersectionObserver((e=>{let[n]=e;return n.target.classList.toggle("is-sticky",n.intersectionRatio<1)}),{threshold:[1]}).observe(t.current)}}),[]),(0,c.jsx)(o.Wrapper,{ref:t,children:(0,c.jsx)(l.Z,{children:n})})}o.Wrapper=a.ZP.section(r||(r=(0,i.Z)(["\n  position: sticky;\n  top: calc(6.4rem + ",");\n  width: 100%;\n\n  & > *:first-child {\n    transition: padding ","s;\n  }\n\n  &.is-sticky {\n    border-top: 1px solid ",";\n  }\n\n  @media only screen and (max-width: 75em) {\n    bottom: -1px;\n    padding-bottom: 1px;\n\n    & > *:first-child {\n      padding: ",";\n      transition: width ","s;\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.spacings.level3}),(e=>{let{theme:n}=e;return n.durations.level2}),(e=>{let{theme:n}=e;return n.colors.light3}),(e=>{let{theme:n}=e;return n.spacings.level2}),(e=>{let{theme:n}=e;return n.durations.level2}))},7783:(e,n,t)=>{t.d(n,{Z:()=>l});t(2791);var r=t(2268),i=t(3330),s=t(478),a=t(184);function l(e){let{value:n}=e;return(0,a.jsxs)(r.Z,{align:"center",justify:"center",wrap:"wrap",spacing:"1","data-testid":"ToPayInfo",children:[(0,a.jsx)(i.Z,{size:"4",children:"To pay"}),(0,a.jsx)(i.Z,{size:"6",spacing:"1px",children:(0,s.T4)(n)})]})}},7402:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y});var r=t(2791),i=t(9434),s=t(8515),a=t(134),l=t(4642),c=t(2268),o=t(2626),d=t(7252),u=t(6054),h=t(2778),m=t(132),p=t(1936),g=t(184);function x(e){let{onSetModal:n}=e;const t=(0,i.v9)((e=>e.auth.deliveryAddress));return(0,g.jsx)(o.Z,{"data-testid":"DeliveryAddressSection",children:(0,g.jsxs)(c.Z,{direction:"column",align:"start",spacing:"3",children:[(0,g.jsx)(h.Z,{variant:"h4",children:"Delivery address"}),(0,g.jsx)(p.Z,{data:t}),(0,g.jsx)(m.Z,{clicked:()=>n(u.KW.CHANGE_DELIVERY_ADDRESS),children:"Change address"})]})})}var f=t(7783),v=t(4145),j=t(478),b=t(3397);function y(){const e=(0,s.k6)(),n=(0,i.v9)((e=>e.auth.transaction)),t=(0,i.I0)(),p=(0,r.useCallback)((e=>t(a.cf(e))),[t]),y=(0,r.useCallback)((e=>t(a.XT(e))),[t]);(0,r.useEffect)((()=>{(0,j.k3)(),(!n||(null===n||void 0===n?void 0:n.length)<=0)&&e.replace("/cart");const t=e.listen((e=>{"/transaction"!==e.pathname&&y(void 0)}));return()=>{t()}}),[e,n,y]);let Z=null;if((null===n||void 0===n?void 0:n.length)>0){const e=n.reduce(((e,n)=>{let{price:t,quantity:r}=n;return e+t*r}),0),t=(0,j.t$)(e);Z=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.Z,{variant:"h3",children:"Transaction"}),(0,g.jsxs)(l.Z,{proportion:"3/1",makeVerticalWhen:1200,"data-testid":"Transaction-content",children:[(0,g.jsxs)(c.Z,{direction:"column",align:"stretch",spacing:"3",children:[(0,g.jsx)(x,{onSetModal:p}),(0,g.jsxs)(o.Z,{children:[(0,g.jsx)(h.Z,{variant:"h4",children:"Products"}),(0,g.jsx)(v.Z,{items:n,type:u.cs.TRANSACTION})]})]}),(0,g.jsx)(d.Z,{children:(0,g.jsxs)(c.Z,{direction:"column",spacing:"2",children:[(0,g.jsx)(f.Z,{value:t}),(0,g.jsx)(m.Z,{filled:!0,clicked:()=>p(u.KW.BUY_PRODUCTS),children:"I buy and pay"})]})})]})]})}return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(b.Z,{title:"Transaction summary - E-Shopping"}),Z]})}}}]);
//# sourceMappingURL=402.3a52a642.chunk.js.map