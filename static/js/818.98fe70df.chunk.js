"use strict";(self.webpackChunkeshopping_app_client=self.webpackChunkeshopping_app_client||[]).push([[818],{3977:(e,t,n)=>{n.d(t,{Z:()=>v});var l,i=n(168);const s=n(8470).ZP.div(l||(l=(0,i.Z)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"])),(e=>{let{theme:t}=e;return t.colors.light4}),(e=>{let{theme:t}=e;return t.spacings.level2}));var o,r=n(9373),a=n(8168),c=n(2791);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},d.apply(this,arguments)}function u(e,t){let{title:n,titleId:l,...i}=e;return c.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":l},i),n?c.createElement("title",{id:l},n):null,o||(o=c.createElement("path",{d:"M0 10h24v4H0z"})))}const h=c.forwardRef(u);n.p;var p=n(571),m=n(2610),g=n(184);function v(e){const{name:t,value:n,maxQuantity:l,incremented:i,decremented:o,changed:c,blured:d,focused:u}=e;return(0,g.jsxs)(s,{children:[(0,g.jsx)("button",{type:"button",className:"button minus",disabled:n<=1,onClick:o,"data-testid":"ChooseQuantity-minus-btn","aria-label":"Decrease product quantity",children:(0,g.jsx)(a.Z,{$size:"small",$color:n<=1?m.Z.colors.light2:"","data-testid":"ChooseQuantity-minus-icon",children:(0,g.jsx)(h,{})})}),(0,g.jsx)(r.Z,{name:t,size:"small",value:n,changed:c,blured:d,focused:u}),(0,g.jsx)("button",{type:"button",className:"button plus",disabled:n>=l,onClick:i,"data-testid":"ChooseQuantity-plus-btn","aria-label":"Increase product quantity",children:(0,g.jsx)(a.Z,{$size:"small",$color:n>=l?m.Z.colors.light2:"","data-testid":"ChooseQuantity-plus-icon",children:(0,g.jsx)(p.r,{})})})]})}v.defaultProps={focused:()=>{}}},9818:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var l,i=n(2791),s=n(7689),o=n(1947),r=n(9434),a=n(8761),c=n(168),d=n(8470);const u=d.ZP.div(l||(l=(0,c.Z)(["\n  & .photo-section {\n    align-items: center;\n    display: flex;\n    height: 45rem;\n    justify-content: center;\n    margin-right: ",";\n    padding: "," ",";\n    width: 100%;\n  }\n\n  & .photo {\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  & .data-section {\n    align-self: stretch;\n    display: flex;\n    flex-direction: column;\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .photo-section {\n      margin-right: ",";\n    }\n  }\n"])),(e=>{let{theme:t}=e;return t.spacings.level5}),(e=>{let{theme:t}=e;return t.spacings.level1}),(e=>{let{theme:t}=e;return t.spacings.level2}),(e=>{let{theme:t}=e;return t.spacings.level3}));var h,p=n(6207),m=n(5962),g=n(2702),v=n(4587),x=n(7708);const f=d.ZP.div(h||(h=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  & > button:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(e=>{let{theme:t}=e;return t.spacings.level2}));var j=n(9508),$=n(3977),b=n(4467),Z=n(8277),y=n(2610),P=(n(9776),n(2364)),w=n(184);function C(e){const{productId:t,productQuantity:n,productSellerUsername:l,onSetModal:c,userProfile:d}=e,u=(0,s.s0)(),[h,p]=(0,i.useState)(1),m=(0,r.v9)((e=>e.auth.cart)),x=(0,r.v9)((e=>e.ui.isCartLoading)),C=(0,r.I0)(),k=(0,i.useCallback)((e=>C(a._7(e))),[C]),E=(0,i.useCallback)(((e,t)=>C(a.DA(e,t))),[C]),D=e=>{const t=+e.target.value||"";t&&(t<1||t>n)||p(t)},S=e=>{const t=+e.target.value;p(!t||t<1?1:t>n?n:t)},I=()=>{h<n&&p((e=>e+1))},_=()=>{h>1&&p((e=>e-1))},T=()=>{d?(null===d||void 0===d?void 0:d.status)!==P.eB.ACTIVE?c(P.w8.PENDING_USER_INFO):k({quantity:h,product:t}):c(P.w8.LOGIN)},N=()=>{d?(null===d||void 0===d?void 0:d.status)!==P.eB.ACTIVE?c(P.w8.PENDING_USER_INFO):E(u,{product:t,quantity:h}):c(P.w8.LOGIN)};let O=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Z,{$size:"level2",children:"Quantity: ".concat(n)}),(0,w.jsx)(v.Z,{$variant:"h4",$mgTop:"level3",children:"You are the seller of this product"})]});if((null===d||void 0===d?void 0:d.username)!==l){var q;let e=null;m&&(e=m.find((e=>e.product._id===t)));let l=(0,w.jsx)(j.Z,{$filled:!0,$stretch:!0,clicked:T,isLoading:x,children:"add to cart"});(null===(q=e)||void 0===q?void 0:q.quantity)>=n&&(l=(0,w.jsxs)(v.Z,{$variant:"h4",$align:"center",$mgBottom:"2","data-testid":"PurchaseSection-not-able-to-add",children:["You have added all pieces to\xa0",(0,w.jsx)(o.rU,{to:"/cart",children:(0,w.jsx)(Z._,{children:"cart"})})]})),O=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(b.Z,{$align:"center",$mgBottom:"level3","data-testid":"PurchaseSection-choose-quantity-wrapper",children:[(0,w.jsx)($.Z,{name:"quantity",maxQuantity:n,value:h,incremented:I,decremented:_,changed:D,blured:S}),(0,w.jsxs)(g.Z,{$size:"level2",$mgLeft:"level1","data-testid":"PurchaseSection-product-quantity",children:["of ".concat(n," piece").concat(n>1?"s":""),e&&(0,w.jsxs)(g.Z,{$color:y.Z.colors.light4,"data-testid":"PurchaseSection-quantity-in-cart",children:["\xa0","(".concat(e.quantity," in cart)")]})]})]}),l,(0,w.jsx)(j.Z,{$filled:!0,$stretch:!0,clicked:N,isLoading:x,children:"buy now"})]})}return(0,w.jsx)(f,{children:O})}C.defaultProps={productSellerUsername:void 0,userProfile:null};var k=n(1857),E=n(461),D=n(5436),S=n(2727),I=n(2260);function _(){const{id:e}=(0,s.UO)(),t=(0,D.Z)(),n=(0,r.v9)((e=>e.auth.profile)),l=(0,r.v9)((e=>e.product.productDetails)),c=(0,r.I0)(),d=(0,i.useCallback)((e=>c(a.g3(e))),[c]),h=(0,i.useCallback)((()=>c(a.AB())),[c]),f=(0,i.useCallback)((e=>c(a.cf(e))),[c]);(0,i.useEffect)((()=>(d(e),(0,E.k3)(),()=>h())),[e,d,h]);let $="Offer is loading... - E-Shopping",_=(0,w.jsx)(p.Z,{align:"center"});if(null===l)$="Offer does not exist - E-Shopping",_=(0,w.jsx)(v.Z,{$variant:"h4",$align:"center",$lineHeight:"level4",children:"Such product does not exist or has already been sold"});else if(l){const{condition:i,description:s,name:r,photo:a,price:c,quantity:d,quantitySold:h,buyerQuantity:p,seller:D,_id:S}=l;$="".concat(r," - E-Shopping");let T=null;h>=1&&(T=(0,w.jsxs)(g.Z,{$size:"level2",$mgBottom:"level3",$color:y.Z.colors.light4,"data-testid":"ProductDetails-quantity-sold",children:[1===p?"1 person":"".concat(p," people")," bought ",h," ",1===h?"unit":"units"]}));let N=(0,w.jsx)(v.Z,{$variant:"h4",$mgTop:"level3","data-testid":"ProductDetails-no-description",children:"This product has no description"});s&&(N=(0,w.jsxs)("section",{"data-testid":"ProductDetails-full-description",children:[(0,w.jsx)(v.Z,{$variant:"h4",$mgBottom:"level2",$mgTop:"level3",children:"Description"}),(0,w.jsx)(g.Z,{$size:"level3",$lineHeight:"level5",children:s})]}));const O=(null===n||void 0===n?void 0:n.username)===D.username;let q=null,z=null;O&&(q=(0,w.jsx)(j.Z,{$color:"blue",clicked:()=>f(P.w8.EDIT_PRODUCT),"data-testid":"ProductDetails-edit-button",children:"Edit offer"})),(O||null!==n&&void 0!==n&&n.isAdmin)&&(z=(0,w.jsx)(j.Z,{$color:"red",clicked:()=>f(P.w8.DELETE_PRODUCT),"data-testid":"ProductDetails-delete-button",children:"Delete offer"}));let B=null;(z||q)&&(B=(0,w.jsxs)(b.Z,{$mgTop:"level5",$justify:"center",$spacing:"level3",children:[q,z]}));const U=i!==I.n.NOT_APPLICABLE?i:"not applicable";_=(0,w.jsx)(m.Z,{children:(0,w.jsxs)(u,{children:[(0,w.jsxs)(x.Z,{$proportion:t.width<=900?"1/1":"3/2",$makeVerticalWhen:600,children:[(0,w.jsx)("section",{className:"photo-section",children:(0,w.jsx)("img",{src:a?"".concat("https://eshopping-api.vercel.app","/products/").concat(S,"/photo"):k,alt:r,className:"photo"})}),(0,w.jsxs)("section",{className:"data-section",children:[(0,w.jsx)(v.Z,{$variant:"h4",children:r}),(0,w.jsxs)(g.Z,{$size:"level2",$mgTop:"level2",$mgBottom:"level2",children:[(0,w.jsx)(g.Z,{$color:y.Z.colors.light4,children:"from\xa0"}),(0,w.jsx)(o.rU,{to:"/user/".concat(D.username,"?p=1"),"data-testid":"ProductDetails-seller-link",children:(0,w.jsx)(Z._,{children:D.username})})]}),(0,w.jsxs)(g.Z,{$size:"level2",children:[(0,w.jsx)(g.Z,{$color:y.Z.colors.light4,children:"Condition:"})," ".concat(U.slice(0,1).toUpperCase()).concat(U.slice(1))]}),(0,w.jsx)(g.Z,{$size:"level6",$spacing:"1px",$mgTop:"level3",$mgBottom:"level3",children:(0,E.T4)(c)}),T,(0,w.jsx)(C,{productId:e,productQuantity:d,productSellerUsername:D.username,onSetModal:f,userProfile:n})]})]}),N,B]})})}return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(S.Z,{title:$,description:"Check out details about this products"}),_]})}}}]);
//# sourceMappingURL=818.98fe70df.chunk.js.map