(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[7],{356:function(t,e,n){"use strict";var c,i=n(8),r=n(0),a=n(7),o=n(64),s=n(22);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var n,c,i=function(t,e){if(null==t)return{};var n,c,i={},r=Object.keys(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(c=0;c<r.length;c++)n=r[c],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t,e){var n=t.title,i=t.titleId,a=u(t,["title","titleId"]);return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:e,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,c||(c=r.createElement("path",{d:"M0 10h24v4H0z"})))}var h,b=r.forwardRef(d),j=(n.p,n(69)),p=n(21),f=n(1),m={};m.Wrapper=a.c.div(h||(h=Object(i.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"])),(function(t){return t.theme.colors.light4}),(function(t){return t.theme.spacings.level2}));var O=function(t){var e=t.name,n=t.value,c=t.maxQuantity,i=t.incremented,r=t.decremented,a=t.changed,l=t.blured,u=t.focused;return Object(f.jsxs)(m.Wrapper,{children:[Object(f.jsx)("button",{type:"button",className:"button minus",disabled:n<=1,onClick:r,"data-testid":"ChooseQuantity-minus-btn",children:Object(f.jsx)(s.a,{size:"small",color:n<=1?p.a.colors.light2:"","data-testid":"ChooseQuantity-minus-icon",children:Object(f.jsx)(b,{})})}),Object(f.jsx)(o.a,{name:e,size:"small",value:n,changed:a,blured:l,focused:u}),Object(f.jsx)("button",{type:"button",className:"button plus",disabled:n>=c,onClick:i,"data-testid":"ChooseQuantity-plus-btn",children:Object(f.jsx)(s.a,{size:"small",color:n>=c?p.a.colors.light2:"","data-testid":"ChooseQuantity-plus-icon",children:Object(f.jsx)(j.a,{})})})]})};O.defaultProps={focused:function(){}};e.a=O},363:function(t,e,n){"use strict";n.r(e);var c,i,r=n(0),a=n(16),o=n(5),s=n(2),l=n(10),u=n(8),d=n(7),h=d.c.div(c||(c=Object(u.a)(["\n  & .photo-section {\n    align-items: center;\n    display: flex;\n    height: 45rem;\n    justify-content: center;\n    margin-right: ",";\n    padding: "," ",";\n    width: 100%;\n  }\n\n  & .photo {\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  & .data-section {\n    align-self: stretch;\n    display: flex;\n    flex-direction: column;\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .photo-section {\n      margin-right: ",";\n    }\n  }\n"])),(function(t){return t.theme.spacings.level5}),(function(t){return t.theme.spacings.level1}),(function(t){return t.theme.spacings.level2}),(function(t){return t.theme.spacings.level3})),b=n(51),j=n(67),p=n(12),f=n(23),m=n(28),O=n(14),g=n(25),v=d.c.div(i||(i=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n\n  & > button:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(t){return t.theme.spacings.level2})),x=n(17),y=n(356),k=n(46),P=n(21),w=n(24),C=n(1),S=function(t){var e=t.productId,n=t.productQuantity,c=t.productSellerUsername,i=t.onSetModal,u=t.userProfile,d=Object(g.k)(),h=Object(r.useState)(1),b=Object(O.a)(h,2),j=b[0],m=b[1],S=Object(o.c)((function(t){return t.auth.cart})),D=Object(o.c)((function(t){return t.ui.isCartLoading})),E=Object(o.b)(),N=Object(r.useCallback)((function(t){return E(l.b(t))}),[E]),q=Object(r.useCallback)((function(t,e){return E(l.t(t,e))}),[E]),I=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a,{size:"2",children:"Quantity: ".concat(n)}),Object(C.jsx)(f.a,{variant:"h4",mgTop:"3",children:"You are the seller of this product"})]});if((null===u||void 0===u?void 0:u.username)!==c){var z,T=null;S&&(T=S.find((function(t){return t.product._id===e})));var Q=Object(C.jsx)(x.a,{filled:!0,stretch:!0,clicked:function(){u?"active"!==(null===u||void 0===u?void 0:u.status)?i(!0,s.k.PENDING_USER_INFO):N({quantity:j,product:e}):i(!0,s.k.LOGIN)},isLoading:D,children:"add to cart"});(null===(z=T)||void 0===z?void 0:z.quantity)>=n&&(Q=Object(C.jsxs)(f.a,{variant:"h4",align:"center",mgBottom:"2","data-testid":"PurchaseSection-not-able-to-add",children:["You have added all pieces to\xa0",Object(C.jsx)(a.Link,{to:"/cart",children:Object(C.jsx)(k.b,{children:"cart"})})]})),I=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(w.a,{align:"center",mgBottom:"3","data-testid":"PurchaseSection-choose-quantity-wrapper",children:[Object(C.jsx)(y.a,{name:"quantity",maxQuantity:n,value:j,incremented:function(){j<n&&m((function(t){return t+1}))},decremented:function(){j>1&&m((function(t){return t-1}))},changed:function(t){var e=+t.target.value||"";e&&(e<1||e>n)||m(e)},blured:function(t){var e=+t.target.value;m(!e||e<1?1:e>n?n:e)}}),Object(C.jsxs)(p.a,{size:"2",mgLeft:"1","data-testid":"PurchaseSection-product-quantity",children:["of ".concat(n," piece").concat(n>1?"s":""),T&&Object(C.jsxs)(p.a,{color:P.a.colors.light4,"data-testid":"PurchaseSection-quantity-in-cart",children:["\xa0","(".concat(T.quantity," in cart)")]})]})]}),Q,Object(C.jsx)(x.a,{filled:!0,stretch:!0,clicked:function(){u?"active"!==(null===u||void 0===u?void 0:u.status)?i(!0,s.k.PENDING_USER_INFO):q(d,{product:e,quantity:j}):i(!0,s.k.LOGIN)},isLoading:D,children:"buy now"})]})}return Object(C.jsx)(v,{children:I})};S.defaultProps={productSellerUsername:void 0,userProfile:null};var D=S,E=n(101),N=n(4),q=n(80);e.default=function(t){var e=t.match.params.id,n=Object(q.a)(),c=Object(o.c)((function(t){return t.auth.profile})),i=Object(o.c)((function(t){return t.product.productDetails})),u=Object(o.b)(),d=Object(r.useCallback)((function(t){return u(l.q(t))}),[u]),O=Object(r.useCallback)((function(){return u(l.E())}),[u]),g=Object(r.useCallback)((function(t,e){return u(l.B(t,e))}),[u]);Object(r.useEffect)((function(){return d(e),function(){return O()}}),[e,d,O]);var v=Object(C.jsx)(b.a,{align:"center"});if(null===i)v=Object(C.jsx)(f.a,{variant:"h4",align:"center",lineHeight:"4",children:"Such product does not exist or has already been sold"});else if(i){var y=i.condition,S=i.description,I=i.name,z=i.photo,T=i.price,Q=i.quantity,L=i.quantitySold,_=i.buyerQuantity,B=i.seller,U=i._id,R=null;L>=1&&(R=Object(C.jsxs)(p.a,{size:"2",mgBottom:"3",color:P.a.colors.light4,"data-testid":"ProductDetails-quantity-sold",children:[1===_?"1 person":"".concat(_," people")," bought ",L," ",1===L?"unit":"units"]}));var F=Object(C.jsx)(f.a,{variant:"h4",mgTop:"3","data-testid":"ProductDetails-no-description",children:"This product has no description"});S&&(F=Object(C.jsxs)("section",{"data-testid":"ProductDetails-full-description",children:[Object(C.jsx)(f.a,{variant:"h4",mgBottom:"2",mgTop:"3",children:"Description"}),Object(C.jsx)(p.a,{size:"3",lineHeight:"5",children:S})]}));var G=(null===c||void 0===c?void 0:c.username)===B.username,H=null,M=null;G&&(H=Object(C.jsx)(x.a,{color:"blue",clicked:function(){return g(!0,s.k.EDIT_PRODUCT)},"data-testid":"ProductDetails-edit-button",children:"Edit offer"})),(G||(null===c||void 0===c?void 0:c.isAdmin))&&(M=Object(C.jsx)(x.a,{color:"red",clicked:function(){return g(!0,s.k.DELETE_PRODUCT)},"data-testid":"ProductDetails-delete-button",children:"Delete offer"}));var W=null;(M||H)&&(W=Object(C.jsxs)(w.a,{mgTop:"5",justify:"center",spacing:"3",children:[H,M]}));var J="not_applicable"!==y?y:"not applicable";v=Object(C.jsx)(j.a,{children:Object(C.jsxs)(h,{children:[Object(C.jsxs)(m.a,{proportion:n.width<=900?"1/1":"3/2",makeVerticalWhen:600,children:[Object(C.jsx)("section",{className:"photo-section",children:Object(C.jsx)("img",{src:z?"".concat("https://radeon2211-eshopping.herokuapp.com","/products/").concat(U,"/photo"):E.a,alt:I,className:"photo"})}),Object(C.jsxs)("section",{className:"data-section",children:[Object(C.jsx)(f.a,{variant:"h4",children:I}),Object(C.jsxs)(p.a,{size:"2",mgTop:"2",mgBottom:"2",children:[Object(C.jsx)(p.a,{color:P.a.colors.light4,children:"from\xa0"}),Object(C.jsx)(a.Link,{to:"/user/".concat(B.username,"?p=1"),"data-testid":"ProductDetails-seller-link",children:Object(C.jsx)(k.b,{children:B.username})})]}),Object(C.jsxs)(p.a,{size:"2",children:[Object(C.jsx)(p.a,{color:P.a.colors.light4,children:"Condition:"})," ".concat(J.slice(0,1).toUpperCase()).concat(J.slice(1))]}),Object(C.jsx)(p.a,{size:"6",spacing:"1px",mgTop:"3",mgBottom:"3",children:Object(N.d)(T)}),R,Object(C.jsx)(D,{productId:e,productQuantity:Q,productSellerUsername:B.username,onSetModal:g,userProfile:c})]})]}),F,W]})})}return v}}}]);