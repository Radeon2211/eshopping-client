(this["webpackJsonpeshopping-app-client"]=this["webpackJsonpeshopping-app-client"]||[]).push([[3],{228:function(e,n,t){"use strict";var a=t(0),r=t.n(a),c=t(14),i=t(6),l=t(5),o=t(22);function u(){var e=Object(i.a)(["\n  @media only screen and (max-width: 56.25em) {\n    flex: initial;\n  }\n"]);return u=function(){return e},e}function s(){var e=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n\n  & > *:not(:last-child) {\n    margin-right: ",";\n  }\n\n  & .name {\n    flex: 2;\n    font-size: ",";\n\n    & > a {\n      transition: color ","s;\n\n      &:hover {\n        color: ",";\n      }\n    }\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    align-items: start;\n    flex-direction: column;\n    justify-content: center;\n\n    & > *:not(:last-child) {\n      margin-right: 0;\n      margin-bottom: ",";\n    }\n\n    & .name {\n      flex: initial;\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=Object(i.a)(["\n  padding-top: ",";\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n"]);return d=function(){return e},e}var m=Object(l.c)(o.a)(d(),(function(e){return e.theme.spacings.level3})),f=l.c.div(s(),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.fontSizes.level3}),(function(e){return e.theme.durations.level1}),(function(e){return e.theme.colors.green}),(function(e){return e.theme.spacings.level1})),p=Object(l.c)(o.a)(u()),h=t(19),v=t(82),g=t(9),b=t(2),E=function(e){var n=e.data,t=e.orderId,a=n._id,i=n.name,l=n.price,o=n.quantity,u=n.photo,s=Object(b.j)(l*o);return r.a.createElement(m,{spacing:"2","data-testid":"TransactionAndOrderProdItem"},r.a.createElement(c.Link,{to:"/product/".concat(a),"data-testid":"TransactionAndOrderProdItem-product-link-photo"},r.a.createElement(v.a,{photo:u,alt:i,productId:a,width:"5",height:"5",orderId:t})),r.a.createElement(f,null,r.a.createElement("span",{className:"name"},r.a.createElement(c.Link,{to:"/product/".concat(a),"data-testid":"TransactionAndOrderProdItem-product-link-name"},i)),r.a.createElement(p,{justify:"space-between",align:"center",flex:"1"},r.a.createElement(g.a,{size:"2",color:h.a.colors.light4},"".concat(o," x ").concat(Object(b.d)(l))),r.a.createElement(g.a,{size:"4"},Object(b.d)(s)))))};E.defaultProps={orderId:""};n.a=E},229:function(e,n,t){"use strict";var a=t(6),r=t(0),c=t.n(r),i=t(5),l=t(79),o=t(20);function u(){return(u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var d=c.a.createElement("path",{d:"M0 10h24v4H0z"}),m=function(e){var n=e.svgRef,t=e.title,a=s(e,["svgRef","title"]);return c.a.createElement("svg",u({viewBox:"0 0 24 24",width:24,height:24,ref:n},a),t?c.a.createElement("title",null,t):null,d)},f=c.a.forwardRef((function(e,n){return c.a.createElement(m,u({svgRef:n},e))})),p=(t.p,t(83)),h=t(19);function v(){var e=Object(a.a)(["\n  align-items: stretch;\n  display: flex;\n\n  & .button {\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 1px;\n    cursor: pointer;\n    outline: none;\n    padding: 0 ",";\n\n    &[disabled] {\n      cursor: default;\n    }\n\n    &.minus {\n      border-right: 0;\n    }\n\n    &.plus {\n      border-left: 0;\n    }\n  }\n"]);return v=function(){return e},e}var g={};g.Wrapper=i.c.div(v(),(function(e){return e.theme.colors.light4}),(function(e){return e.theme.spacings.level2}));var b=function(e){var n=e.name,t=e.value,a=e.maxQuantity,r=e.incremented,i=e.decremented,u=e.changed,s=e.blured,d=e.focused;return c.a.createElement(g.Wrapper,null,c.a.createElement("button",{type:"button",className:"button minus",disabled:t<=1,onClick:i,"data-testid":"ChooseQuantity-minus-btn"},c.a.createElement(o.a,{size:"small",color:t<=1?h.a.colors.light2:"","data-testid":"ChooseQuantity-minus-icon"},c.a.createElement(f,null))),c.a.createElement(l.a,{name:n,size:"small",value:t,changed:u,blured:s,focused:d}),c.a.createElement("button",{type:"button",className:"button plus",disabled:t>=a,onClick:r,"data-testid":"ChooseQuantity-plus-btn"},c.a.createElement(o.a,{size:"small",color:t>=a?h.a.colors.light2:"","data-testid":"ChooseQuantity-plus-icon"},c.a.createElement(p.a,null))))};b.defaultProps={focused:function(){}};n.a=b},230:function(e,n,t){"use strict";var a=t(0),r=t.n(a),c=t(22),i=t(9);n.a=function(e){var n=e.data,t=n.firstName,a=n.lastName,l=n.street,o=n.zipCode,u=n.city,s=n.country,d=n.phone,m=["".concat(t," ").concat(a),l,"".concat(o," ").concat(u),s,d];return r.a.createElement(c.a,{direction:"column",spacing:"1"},m.map((function(e,n){return r.a.createElement(i.a,{key:n,size:"3",wordBreak:"break-all"},e)})))}},231:function(e,n,t){"use strict";var a=t(13),r=t(6),c=t(0),i=t.n(c),l=t(5),o=t(81);function u(){var e=Object(r.a)(["\n  position: sticky;\n  top: calc(6.4rem + ",");\n  width: 100%;\n\n  & > *:first-child {\n    transition: padding ","s;\n  }\n\n  &.is-sticky {\n    border-top: 1px solid ",";\n  }\n\n  @media only screen and (max-width: 75em) {\n    bottom: -1px;\n    padding-bottom: 1px;\n\n    & > *:first-child {\n      padding: ",";\n      transition: width ","s;\n    }\n  }\n"]);return u=function(){return e},e}var s={};s.Wrapper=l.c.section(u(),(function(e){return e.theme.spacings.level3}),(function(e){return e.theme.durations.level2}),(function(e){return e.theme.colors.light3}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.durations.level2}));n.a=function(e){var n=e.children,t=Object(c.useRef)(null);return Object(c.useEffect)((function(){t.current&&new IntersectionObserver((function(e){var n=Object(a.a)(e,1)[0];return n.target.classList.toggle("is-sticky",n.intersectionRatio<1)}),{threshold:[1]}).observe(t.current)}),[]),i.a.createElement(s.Wrapper,{ref:t},i.a.createElement(o.a,null,n))}},232:function(e,n,t){"use strict";var a=t(0),r=t.n(a),c=t(22),i=t(9),l=t(2);n.a=function(e){var n=e.value;return r.a.createElement(c.a,{align:"center",justify:"center",wrap:"wrap",spacing:"1"},r.a.createElement(i.a,{size:"4"},"To pay"),r.a.createElement(i.a,{size:"6",spacing:"1px"},Object(l.d)(n)))}},233:function(e,n,t){"use strict";var a=t(11),r=t(13),c=t(6),i=t(0),l=t.n(i),o=t(5),u=t(14),s=t(228),d=t(4),m=t(7);function f(){var e=Object(c.a)(["\n  align-items: center;\n  display: flex;\n  flex-wrap: wrap;\n  padding: calc(1.5 * ",") 0;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n\n  & .photo-and-name {\n    align-items: center;\n    display: flex;\n  }\n\n  & .name {\n    font-size: ",";\n    margin-left: ",";\n    width: 31rem;\n\n    & > a {\n      transition: color ","s;\n\n      &:hover {\n        color: ",";\n      }\n    }\n  }\n\n  & .mobile-lower-row {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n    flex: 1;\n  }\n\n  & .choose-quantity-box {\n    align-items: center;\n    display: flex;\n  }\n\n  & .price-box {\n    align-items: flex-end;\n    display: flex;\n    flex-direction: column;\n    height: ",";\n    justify-content: center;\n  }\n\n  & .remove-icon {\n    cursor: pointer;\n    justify-self: right;\n    margin-left: ",";\n    padding: calc(0.5 * ",");\n  }\n\n  @media only screen and (max-width: 56.25em) {\n    & .mobile-lower-row {\n      margin-top: ",";\n      min-width: 100%;\n      order: 1;\n    }\n\n    & .name {\n      width: auto;\n    }\n\n    & .remove-icon {\n      margin-left: auto;\n      padding-left: calc(\n        0.5 * "," + ","\n      );\n    }\n  }\n\n  @media only screen and (max-width: 37.5em) {\n    & .name {\n      margin-left: ",";\n    }\n  }\n"]);return f=function(){return e},e}var p=o.c.div(f(),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.colors.light2}),(function(e){return e.theme.fontSizes.level3}),(function(e){return e.theme.spacings.level3}),(function(e){return e.theme.durations.level1}),(function(e){return e.theme.colors.green}),(function(e){return e.theme.spacings.level4}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level2}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level1}),(function(e){return e.theme.spacings.level2})),h=t(229),v=t(1),g=t(2),b=t(20),E=t(9);function y(){return(y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function O(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var j=l.a.createElement("path",{d:"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"}),x=function(e){var n=e.svgRef,t=e.title,a=O(e,["svgRef","title"]);return l.a.createElement("svg",y({width:24,height:24,viewBox:"0 0 24 24",ref:n},a),t?l.a.createElement("title",null,t):null,j)},w=l.a.forwardRef((function(e,n){return l.a.createElement(x,y({svgRef:n},e))})),k=(t.p,t(19)),C=t(82),z=function(e){var n=e.data,t=e.isCartLoading,a=n._id,c=n.quantity,o=n.product,s=o._id,f=o.name,y=o.price,O=o.photo,j=o.quantity,x=Object(i.useState)(c),z=Object(r.a)(x,2),I=z[0],R=z[1],N=Object(i.useState)(!1),S=Object(r.a)(N,2),P=S[0],A=S[1],T=Object(d.b)(),L=Object(i.useCallback)((function(e,n,t){return T(m.G(e,n,t))}),[T]),M=Object(i.useCallback)((function(e){return T(m.y(e))}),[T]);Object(i.useEffect)((function(){R((function(e){return e===c||t||P?e:c}))}),[c,I,R,P,t]);return l.a.createElement(p,{"data-testid":"CartItem"},l.a.createElement("div",{className:"photo-and-name"},l.a.createElement(u.Link,{to:"/product/".concat(s),"data-testid":"CartItem-product-link-photo"},l.a.createElement(C.a,{photo:O,alt:f,productId:s,width:"7",height:"7"})),l.a.createElement("span",{className:"name"},l.a.createElement(u.Link,{to:"/product/".concat(s),"data-testid":"CartItem-product-link-name"},f))),l.a.createElement("div",{className:"mobile-lower-row"},l.a.createElement("div",{className:"choose-quantity-box"},l.a.createElement(h.a,{maxQuantity:j,value:I,incremented:function(){R((function(e){return e<j?e+1:e})),L(a,v.s.INCREMENT)},decremented:function(){R((function(e){return e>0?e-1:e})),L(a,v.s.DECREMENT)},name:"quantity",changed:function(e){var n=+e.target.value||"";n||R(n),n<1||n>j||R(n)},blured:function(e){var n=+e.target.value;!n||n<1?(R(1),L(a,v.s.NUMBER,1)):n>j?(R(j),L(a,v.s.NUMBER,j)):n!==c&&L(a,v.s.NUMBER,n),A(!1)},focused:function(){return A(!0)}}),l.a.createElement(E.a,{size:"2",mgLeft:"1","data-testid":"CartItem-available-quantity"},"of ".concat(j))),l.a.createElement("div",{className:"price-box"},l.a.createElement(E.a,{size:"5"},Object(g.d)(y*c)),c>1&&l.a.createElement(E.a,{size:"2",textAlign:"right","data-testid":"CartItem-price-per-piece"},"per piece ".concat(Object(g.d)(y))))),l.a.createElement(b.a,{size:"medium",color:k.a.colors.red,onClick:function(){return M(a)},className:"remove-icon"},l.a.createElement(w,null)))},I=t(52);function R(){var e=Object(c.a)(["\n  padding: "," 0;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:last-child {\n    padding-bottom: 0;\n  }\n"]);return R=function(){return e},e}var N={};N.SingleSeller=o.c.div(R(),(function(e){return e.theme.spacings.level3}),(function(e){return e.theme.colors.light3}));var S=function(e){var n=e.items,t=e.type,c=e.isCartLoading,i=n.reduce((function(e,n){var a=t===v.g.CART?n.product.seller.username:n.seller.username;return e[a]||(e[a]={items:[],sellerUsername:a}),e[a].items.push(n),e}),{});return Object.entries(i).map((function(e){var n=Object(r.a)(e,2),t=n[0],c=n[1];return Object(a.a)({sellerUsername:t},c)})).map((function(e){var n=e.sellerUsername,a=e.items;return l.a.createElement(N.SingleSeller,{key:n},l.a.createElement(E.a,{size:"3",display:"block"},l.a.createElement("span",null,"seller "),l.a.createElement(u.Link,{to:"/user/".concat(n,"?p=1"),"data-testid":"CartAndTransactionItems-seller-link"},l.a.createElement(I.b,null,n))),t===v.g.CART?a.map((function(e){return l.a.createElement(z,{key:e._id,data:e,isCartLoading:c})})):a.map((function(e){return l.a.createElement(s.a,{key:e._id,data:e})})))}))};S.defaultProps={isCartLoading:void 0};n.a=S},239:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(4),i=t(26),l=t(7),o=t(30),u=t(22),s=t(81),d=t(231),m=t(1),f=t(21),p=t(15),h=t(230),v=function(e){var n=e.onSetModal,t=Object(c.c)((function(e){return e.auth.deliveryAddress}));return r.a.createElement(s.a,{"data-testid":"DeliveryAddressSection"},r.a.createElement(u.a,{direction:"column",align:"start",spacing:"3"},r.a.createElement(f.a,{variant:"h4"},"Delivery address"),r.a.createElement(h.a,{data:t}),r.a.createElement(p.a,{clicked:function(){return n(!0,m.k.CHANGE_DELIVERY_ADDRESS)}},"Change address")))},g=t(232),b=t(233),E=t(2);n.default=function(){var e=Object(i.k)(),n=Object(c.c)((function(e){return e.auth.transaction})),t=Object(c.b)(),h=Object(a.useCallback)((function(e,n){return t(l.B(e,n))}),[t]),y=Object(a.useCallback)((function(e){return t(l.F(e))}),[t]);Object(a.useEffect)((function(){return(!n||(null===n||void 0===n?void 0:n.length)<=0)&&e.replace("/cart"),function(){return y(void 0)}}),[e,n,y]);var O=null;if((null===n||void 0===n?void 0:n.length)>0){var j=n.reduce((function(e,n){return e+n.price*n.quantity}),0),x=Object(E.j)(j);O=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{variant:"h3"},"Transaction"),r.a.createElement(o.a,{proportion:"3/1",makeVerticalWhen:1200},r.a.createElement(u.a,{direction:"column",align:"stretch",spacing:"3"},r.a.createElement(v,{onSetModal:h}),r.a.createElement(s.a,null,r.a.createElement(f.a,{variant:"h4"},"Products"),r.a.createElement(b.a,{items:n,type:m.g.TRANSACTION}))),r.a.createElement(d.a,null,r.a.createElement(u.a,{direction:"column",spacing:"2"},r.a.createElement(g.a,{value:x}),r.a.createElement(p.a,{filled:!0,clicked:function(){return h(!0,m.k.BUY_PRODUCTS)}},"I buy and pay")))))}return O}}}]);